<!DOCTYPE HTML>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Saturn Elephant - Child tables with DT, editing, exporting</title>
  <link href="../libraries/bootstrap/bootstrap-grid.min.css" rel="stylesheet">
  <link rel="stylesheet" href="../css/default2.css" />
  <link rel="stylesheet" href="../css/post.css" />
  <link rel="stylesheet" href="../css/misc.css" /> 
  
    <link rel="stylesheet" href="../css/pandoc-solarized.css" /> 
   
  
  <link href="https://fonts.googleapis.com/css?family=Raleway:400,600,200,800" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Droid+Sans" rel="stylesheet" type="text/css">
  <script src="../libraries/jquery.min.js"></script>
  <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>
</head>

<body>
  <div class="container-fluid">
    <div class="row">
      <!-- Sidebar. -->
      <div class="sidebar col-sm-2">
        <div class="row">
          <div class="col-sm-12" style="float:right;clear:both;margin-right:50px;margin-top:50px;">
            <a href="https://www.r-bloggers.com/">
              <img src="../images/Rbloggers.png" alt="Rbloggers" width="100%" />
            </a>
            <br />
            <a href="http://t-redactyl.io/">
              <span style="color:black;font-weight:bold;font-family:sans-serif;font-size:25px;">Standard error</span>
            </a>
            <a href="http://timelyportfolio.blogspot.be/">
              <span style="color:grey;font-weight:bold;font-family:sans-serif;font-size:24px;">Timely portfolio</span>
            </a>
            <br />
            <a href="https://antoineguillot.wordpress.com/blog/">
              <span style="color:white;background-color:darkblue;font-weight:bold;font-family:sans-serif;font-size:21px;border:5px solid;border-color:darkblue">ENHANCE DATA</span>
            </a>
            <br />
            <a href="https://fronkonstin.com/">
              <span style="color:black;background-color:gold;font-weight:bold;font-size:29px;border:3px solid;border-color:gold;">Fronkonstin</span>
            </a>
          </div>
        </div>
        <div id="logos">
          <div class="row">
            <div class="col-sm-4">
              <img src="../images/AsymptoteLogo.svg" style="width: 150%; transform: rotateZ(-35deg)" />
            </div>
            <div class="col-sm-4">
              <img src="../images/Rlogo.svg" style="width: 110%;" />
            </div>
            <div class="col-sm-4">
              <img src="../images/shiny-hex.png" style="width: 90%;" />
            </div>
          </div>
          <div class="row">
            <div class="col-sm-4">
              <img src="../images/Povray_logo_sphere.png" style="width: 105%;" />
            </div>
            <div class="col-sm-4">
              <img src="../images/javascript.svg" style="width: 90%;" />
            </div>
            <div class="col-sm-4">
              <img src="../images/haskell.svg" style="width: 110%;" />
            </div>
          </div>
        </div>
      </div>

      <div class="main col-sm-10">
        <div id="header">
          <div id="logo">
            <a href="../">
              <img src="../images/stla.jpg" alt="stla" width="100px" />
            </a>
          </div>
          <div id="navigation" style="margin-top:50px;">
            <a href="../">Home</a>
            <a href="../about.html">About</a>
            <a href="../contact.html">Contact</a>
            <a href="../archive.html">Archive</a>
          </div>
        </div>

        <div class="content">
          <h1>Child tables with DT, editing, exporting</h1> 
          <div class="info">
    Posted on May  8, 2020
    
        by Stéphane Laurent
    
</div>
<div class="info">
    
    Tags: <a title="All pages tagged 'R'." href="../tags/R.html">R</a>, <a title="All pages tagged 'datatables'." href="../tags/datatables.html">datatables</a>, <a title="All pages tagged 'shiny'." href="../tags/shiny.html">shiny</a>, <a title="All pages tagged 'javascript'." href="../tags/javascript.html">javascript</a>
    
</div>

<p>I’m going to show how to use the <code>DT</code> package to do a table with child tables, and how to edit and export such a table.</p>
<p>In order to do a table with child tables, one adds a list column to the dataframe of the main table; each cell of this column contains the child table of the corresponding row, given as a list. This is done by the <code>NestedData</code> function below.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a>NestedData &lt;-<span class="st"> </span><span class="cf">function</span>(dat, children){</span>
<span id="cb1-2"><a href="#cb1-2"></a>  <span class="kw">stopifnot</span>(<span class="kw">length</span>(children) <span class="op">==</span><span class="st"> </span><span class="kw">nrow</span>(dat))</span>
<span id="cb1-3"><a href="#cb1-3"></a>  g &lt;-<span class="st"> </span><span class="cf">function</span>(d){</span>
<span id="cb1-4"><a href="#cb1-4"></a>    <span class="cf">if</span>(<span class="kw">is.data.frame</span>(d)){</span>
<span id="cb1-5"><a href="#cb1-5"></a>      purrr<span class="op">::</span><span class="kw">transpose</span>(d)</span>
<span id="cb1-6"><a href="#cb1-6"></a>    }<span class="cf">else</span>{</span>
<span id="cb1-7"><a href="#cb1-7"></a>      purrr<span class="op">::</span><span class="kw">transpose</span>(<span class="kw">NestedData</span>(d[[<span class="dv">1</span>]], <span class="dt">children =</span> d<span class="op">$</span>children))</span>
<span id="cb1-8"><a href="#cb1-8"></a>    }</span>
<span id="cb1-9"><a href="#cb1-9"></a>  }</span>
<span id="cb1-10"><a href="#cb1-10"></a>  subdats &lt;-<span class="st"> </span><span class="kw">lapply</span>(children, g)</span>
<span id="cb1-11"><a href="#cb1-11"></a>  oplus &lt;-<span class="st"> </span><span class="kw">ifelse</span>(<span class="kw">lengths</span>(subdats), <span class="st">&quot;&amp;oplus;&quot;</span>, <span class="st">&quot;&quot;</span>) </span>
<span id="cb1-12"><a href="#cb1-12"></a>  <span class="kw">cbind</span>(<span class="st">&quot; &quot;</span> =<span class="st"> </span>oplus, dat, <span class="st">&quot;_details&quot;</span> =<span class="st"> </span><span class="kw">I</span>(subdats), </span>
<span id="cb1-13"><a href="#cb1-13"></a>        <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)</span>
<span id="cb1-14"><a href="#cb1-14"></a>}</span></code></pre></div>
<p>The usage of <code>NestedData</code> is easy to understand with an example:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>dat0   =<span class="st"> </span>iris[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>,]        <span class="co"># main table, with three rows</span></span>
<span id="cb2-2"><a href="#cb2-2"></a>dat01  =<span class="st"> </span>airquality[<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>,]  <span class="co"># |- child of first row</span></span>
<span id="cb2-3"><a href="#cb2-3"></a>dat02  =<span class="st"> </span>cars[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>,]        <span class="co"># |- child of second row, with two rows</span></span>
<span id="cb2-4"><a href="#cb2-4"></a>dat021 =<span class="st"> </span>mtcars[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>,]      <span class="co"># |  |- child of first row of dat02</span></span>
<span id="cb2-5"><a href="#cb2-5"></a>dat022 =<span class="st"> </span>PlantGrowth[<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>,] <span class="co"># |  |- child of second row of dat02</span></span>
<span id="cb2-6"><a href="#cb2-6"></a>dat03  =<span class="st"> </span><span class="kw">data.frame</span>(<span class="ot">NULL</span>)  <span class="co"># |- third row has no child</span></span>
<span id="cb2-7"><a href="#cb2-7"></a></span>
<span id="cb2-8"><a href="#cb2-8"></a>Dat &lt;-<span class="st"> </span><span class="kw">NestedData</span>(</span>
<span id="cb2-9"><a href="#cb2-9"></a>  <span class="dt">dat =</span> dat0, </span>
<span id="cb2-10"><a href="#cb2-10"></a>  <span class="dt">children =</span> <span class="kw">list</span>(</span>
<span id="cb2-11"><a href="#cb2-11"></a>    dat01, </span>
<span id="cb2-12"><a href="#cb2-12"></a>    <span class="kw">list</span>(  </span>
<span id="cb2-13"><a href="#cb2-13"></a>      dat02, </span>
<span id="cb2-14"><a href="#cb2-14"></a>      <span class="dt">children =</span> <span class="kw">list</span>(</span>
<span id="cb2-15"><a href="#cb2-15"></a>        dat021, </span>
<span id="cb2-16"><a href="#cb2-16"></a>        dat022</span>
<span id="cb2-17"><a href="#cb2-17"></a>      )</span>
<span id="cb2-18"><a href="#cb2-18"></a>    ), </span>
<span id="cb2-19"><a href="#cb2-19"></a>    dat03 </span>
<span id="cb2-20"><a href="#cb2-20"></a>  )</span>
<span id="cb2-21"><a href="#cb2-21"></a>)</span></code></pre></div>
<p>Now we define the JavaScript callback which will be used. The code depends on whether one wants to display the row names of the main table, so the user has to enter this information before.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="kw">library</span>(DT)</span>
<span id="cb3-2"><a href="#cb3-2"></a></span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="co">## whether to show row names</span></span>
<span id="cb3-4"><a href="#cb3-4"></a>rowNames =<span class="st"> </span><span class="ot">FALSE</span></span>
<span id="cb3-5"><a href="#cb3-5"></a>colIdx &lt;-<span class="st"> </span><span class="kw">as.integer</span>(rowNames)</span>
<span id="cb3-6"><a href="#cb3-6"></a></span>
<span id="cb3-7"><a href="#cb3-7"></a><span class="co">## the callback</span></span>
<span id="cb3-8"><a href="#cb3-8"></a>parentRows &lt;-<span class="st"> </span><span class="kw">which</span>(Dat[,<span class="dv">1</span>] <span class="op">!=</span><span class="st"> &quot;&quot;</span>)</span>
<span id="cb3-9"><a href="#cb3-9"></a>callback &lt;-<span class="st"> </span><span class="kw">JS</span>(</span>
<span id="cb3-10"><a href="#cb3-10"></a>  <span class="kw">sprintf</span>(<span class="st">&quot;var parentRows = [%s];&quot;</span>, <span class="kw">toString</span>(parentRows<span class="dv">-1</span>)),</span>
<span id="cb3-11"><a href="#cb3-11"></a>  <span class="kw">sprintf</span>(<span class="st">&quot;var j0 = %d;&quot;</span>, colIdx),</span>
<span id="cb3-12"><a href="#cb3-12"></a>  <span class="st">&quot;var nrows = table.rows().count();&quot;</span>,</span>
<span id="cb3-13"><a href="#cb3-13"></a>  <span class="st">&quot;for(let i = 0; i &lt; nrows; ++i){&quot;</span>,</span>
<span id="cb3-14"><a href="#cb3-14"></a>  <span class="st">&quot;  var $cell = table.cell(i,j0).nodes().to$();&quot;</span>,</span>
<span id="cb3-15"><a href="#cb3-15"></a>  <span class="st">&quot;  if(parentRows.indexOf(i) &gt; -1){&quot;</span>,</span>
<span id="cb3-16"><a href="#cb3-16"></a>  <span class="st">&quot;    $cell.css({cursor: 'pointer'});&quot;</span>,</span>
<span id="cb3-17"><a href="#cb3-17"></a>  <span class="st">&quot;  }else{&quot;</span>,</span>
<span id="cb3-18"><a href="#cb3-18"></a>  <span class="st">&quot;    $cell.removeClass('details-control');&quot;</span>,</span>
<span id="cb3-19"><a href="#cb3-19"></a>  <span class="st">&quot;  }&quot;</span>,</span>
<span id="cb3-20"><a href="#cb3-20"></a>  <span class="st">&quot;}&quot;</span>,</span>
<span id="cb3-21"><a href="#cb3-21"></a>  <span class="st">&quot;&quot;</span>,</span>
<span id="cb3-22"><a href="#cb3-22"></a>  <span class="st">&quot;// --- make the table header of the nested table --- //&quot;</span>,</span>
<span id="cb3-23"><a href="#cb3-23"></a>  <span class="st">&quot;var formatHeader = function(d, childId){&quot;</span>,</span>
<span id="cb3-24"><a href="#cb3-24"></a>  <span class="st">&quot;  if(d !== null){&quot;</span>,</span>
<span id="cb3-25"><a href="#cb3-25"></a>  <span class="st">&quot;    var html = &quot;</span>, </span>
<span id="cb3-26"><a href="#cb3-26"></a>  <span class="st">&quot;      '&lt;table class=</span><span class="ch">\&quot;</span><span class="st">display compact hover</span><span class="ch">\&quot;</span><span class="st"> ' + &quot;</span>,</span>
<span id="cb3-27"><a href="#cb3-27"></a>  <span class="st">&quot;      'style=</span><span class="ch">\&quot;</span><span class="st">padding-left: 30px;</span><span class="ch">\&quot;</span><span class="st"> id=</span><span class="ch">\&quot;</span><span class="st">' + childId + &quot;</span>, </span>
<span id="cb3-28"><a href="#cb3-28"></a>  <span class="st">&quot;      '</span><span class="ch">\&quot;</span><span class="st">&gt;&lt;thead&gt;&lt;tr&gt;';&quot;</span>,</span>
<span id="cb3-29"><a href="#cb3-29"></a>  <span class="st">&quot;    var data = d[d.length-1] || d._details;&quot;</span>,</span>
<span id="cb3-30"><a href="#cb3-30"></a>  <span class="st">&quot;    for(let key in data[0]){&quot;</span>,</span>
<span id="cb3-31"><a href="#cb3-31"></a>  <span class="st">&quot;      html += '&lt;th&gt;' + key + '&lt;/th&gt;';&quot;</span>,</span>
<span id="cb3-32"><a href="#cb3-32"></a>  <span class="st">&quot;    }&quot;</span>,</span>
<span id="cb3-33"><a href="#cb3-33"></a>  <span class="st">&quot;    html += '&lt;/tr&gt;&lt;/thead&gt;&lt;/table&gt;'&quot;</span>,</span>
<span id="cb3-34"><a href="#cb3-34"></a>  <span class="st">&quot;    return html;&quot;</span>,</span>
<span id="cb3-35"><a href="#cb3-35"></a>  <span class="st">&quot;  } else {&quot;</span>,</span>
<span id="cb3-36"><a href="#cb3-36"></a>  <span class="st">&quot;    return '';&quot;</span>,</span>
<span id="cb3-37"><a href="#cb3-37"></a>  <span class="st">&quot;  }&quot;</span>,</span>
<span id="cb3-38"><a href="#cb3-38"></a>  <span class="st">&quot;};&quot;</span>,</span>
<span id="cb3-39"><a href="#cb3-39"></a>  <span class="st">&quot;&quot;</span>,</span>
<span id="cb3-40"><a href="#cb3-40"></a>  <span class="st">&quot;// --- row callback to style rows of child tables --- //&quot;</span>,</span>
<span id="cb3-41"><a href="#cb3-41"></a>  <span class="st">&quot;var rowCallback = function(row, dat, displayNum, index){&quot;</span>,</span>
<span id="cb3-42"><a href="#cb3-42"></a>  <span class="st">&quot;  if($(row).hasClass('odd')){&quot;</span>,</span>
<span id="cb3-43"><a href="#cb3-43"></a>  <span class="st">&quot;    $(row).css('background-color', 'papayawhip');&quot;</span>,</span>
<span id="cb3-44"><a href="#cb3-44"></a>  <span class="st">&quot;    $(row).hover(function(){&quot;</span>,</span>
<span id="cb3-45"><a href="#cb3-45"></a>  <span class="st">&quot;      $(this).css('background-color', '#E6FF99');&quot;</span>,</span>
<span id="cb3-46"><a href="#cb3-46"></a>  <span class="st">&quot;    }, function(){&quot;</span>,</span>
<span id="cb3-47"><a href="#cb3-47"></a>  <span class="st">&quot;      $(this).css('background-color', 'papayawhip');&quot;</span>,</span>
<span id="cb3-48"><a href="#cb3-48"></a>  <span class="st">&quot;    });&quot;</span>,</span>
<span id="cb3-49"><a href="#cb3-49"></a>  <span class="st">&quot;  } else {&quot;</span>,</span>
<span id="cb3-50"><a href="#cb3-50"></a>  <span class="st">&quot;    $(row).css('background-color', 'lemonchiffon');&quot;</span>,</span>
<span id="cb3-51"><a href="#cb3-51"></a>  <span class="st">&quot;    $(row).hover(function(){&quot;</span>,</span>
<span id="cb3-52"><a href="#cb3-52"></a>  <span class="st">&quot;      $(this).css('background-color', '#DDFF75');&quot;</span>,</span>
<span id="cb3-53"><a href="#cb3-53"></a>  <span class="st">&quot;    }, function(){&quot;</span>,</span>
<span id="cb3-54"><a href="#cb3-54"></a>  <span class="st">&quot;      $(this).css('background-color', 'lemonchiffon');&quot;</span>,</span>
<span id="cb3-55"><a href="#cb3-55"></a>  <span class="st">&quot;    });&quot;</span>,</span>
<span id="cb3-56"><a href="#cb3-56"></a>  <span class="st">&quot;  }&quot;</span>,</span>
<span id="cb3-57"><a href="#cb3-57"></a>  <span class="st">&quot;};&quot;</span>,</span>
<span id="cb3-58"><a href="#cb3-58"></a>  <span class="st">&quot;&quot;</span>,</span>
<span id="cb3-59"><a href="#cb3-59"></a>  <span class="st">&quot;// --- header callback to style header of child tables --- //&quot;</span>,</span>
<span id="cb3-60"><a href="#cb3-60"></a>  <span class="st">&quot;var headerCallback = function(thead, data, start, end, display){&quot;</span>,</span>
<span id="cb3-61"><a href="#cb3-61"></a>  <span class="st">&quot;  $('th', thead).css({&quot;</span>,</span>
<span id="cb3-62"><a href="#cb3-62"></a>  <span class="st">&quot;    'border-top': '3px solid indigo',&quot;</span>, </span>
<span id="cb3-63"><a href="#cb3-63"></a>  <span class="st">&quot;    'color': 'indigo',&quot;</span>,</span>
<span id="cb3-64"><a href="#cb3-64"></a>  <span class="st">&quot;    'background-color': '#fadadd'&quot;</span>,</span>
<span id="cb3-65"><a href="#cb3-65"></a>  <span class="st">&quot;  });&quot;</span>,</span>
<span id="cb3-66"><a href="#cb3-66"></a>  <span class="st">&quot;};&quot;</span>,</span>
<span id="cb3-67"><a href="#cb3-67"></a>  <span class="st">&quot;&quot;</span>,</span>
<span id="cb3-68"><a href="#cb3-68"></a>  <span class="st">&quot;// --- make the datatable --- //&quot;</span>,</span>
<span id="cb3-69"><a href="#cb3-69"></a>  <span class="st">&quot;var formatDatatable = function(d, childId){&quot;</span>,</span>
<span id="cb3-70"><a href="#cb3-70"></a>  <span class="st">&quot;  var data = d[d.length-1] || d._details;&quot;</span>,</span>
<span id="cb3-71"><a href="#cb3-71"></a>  <span class="st">&quot;  var colNames = Object.keys(data[0]);&quot;</span>,</span>
<span id="cb3-72"><a href="#cb3-72"></a>  <span class="st">&quot;  var columns = colNames.map(function(x){&quot;</span>,</span>
<span id="cb3-73"><a href="#cb3-73"></a>  <span class="st">&quot;    return {data: x.replace(/</span><span class="ch">\\</span><span class="st">./g, '</span><span class="ch">\\\\\\</span><span class="st">.'), title: x};&quot;</span>,</span>
<span id="cb3-74"><a href="#cb3-74"></a>  <span class="st">&quot;  });&quot;</span>,</span>
<span id="cb3-75"><a href="#cb3-75"></a>  <span class="st">&quot;  var id = 'table#' + childId;&quot;</span>,</span>
<span id="cb3-76"><a href="#cb3-76"></a>  <span class="st">&quot;  if(colNames.indexOf('_details') === -1){&quot;</span>,</span>
<span id="cb3-77"><a href="#cb3-77"></a>  <span class="st">&quot;    var subtable = $(id).DataTable({&quot;</span>,</span>
<span id="cb3-78"><a href="#cb3-78"></a>  <span class="st">&quot;      'data': data,&quot;</span>,</span>
<span id="cb3-79"><a href="#cb3-79"></a>  <span class="st">&quot;      'columns': columns,&quot;</span>,</span>
<span id="cb3-80"><a href="#cb3-80"></a>  <span class="st">&quot;      'autoWidth': true,&quot;</span>,</span>
<span id="cb3-81"><a href="#cb3-81"></a>  <span class="st">&quot;      'deferRender': true,&quot;</span>,</span>
<span id="cb3-82"><a href="#cb3-82"></a>  <span class="st">&quot;      'info': false,&quot;</span>,</span>
<span id="cb3-83"><a href="#cb3-83"></a>  <span class="st">&quot;      'lengthChange': false,&quot;</span>,</span>
<span id="cb3-84"><a href="#cb3-84"></a>  <span class="st">&quot;      'ordering': data.length &gt; 1,&quot;</span>,</span>
<span id="cb3-85"><a href="#cb3-85"></a>  <span class="st">&quot;      'order': [],&quot;</span>,</span>
<span id="cb3-86"><a href="#cb3-86"></a>  <span class="st">&quot;      'paging': false,&quot;</span>,</span>
<span id="cb3-87"><a href="#cb3-87"></a>  <span class="st">&quot;      'scrollX': false,&quot;</span>,</span>
<span id="cb3-88"><a href="#cb3-88"></a>  <span class="st">&quot;      'scrollY': false,&quot;</span>,</span>
<span id="cb3-89"><a href="#cb3-89"></a>  <span class="st">&quot;      'searching': false,&quot;</span>,</span>
<span id="cb3-90"><a href="#cb3-90"></a>  <span class="st">&quot;      'sortClasses': false,&quot;</span>,</span>
<span id="cb3-91"><a href="#cb3-91"></a>  <span class="st">&quot;      'rowCallback': rowCallback,&quot;</span>,</span>
<span id="cb3-92"><a href="#cb3-92"></a>  <span class="st">&quot;      'headerCallback': headerCallback,&quot;</span>,</span>
<span id="cb3-93"><a href="#cb3-93"></a>  <span class="st">&quot;      'columnDefs': [{targets: '_all', className: 'dt-center'}]&quot;</span>,</span>
<span id="cb3-94"><a href="#cb3-94"></a>  <span class="st">&quot;    });&quot;</span>,</span>
<span id="cb3-95"><a href="#cb3-95"></a>  <span class="st">&quot;  } else {&quot;</span>,</span>
<span id="cb3-96"><a href="#cb3-96"></a>  <span class="st">&quot;    var subtable = $(id).DataTable({&quot;</span>,</span>
<span id="cb3-97"><a href="#cb3-97"></a>  <span class="st">&quot;      'data': data,&quot;</span>,</span>
<span id="cb3-98"><a href="#cb3-98"></a>  <span class="st">&quot;      'columns': columns,&quot;</span>,</span>
<span id="cb3-99"><a href="#cb3-99"></a>  <span class="st">&quot;      'autoWidth': true,&quot;</span>,</span>
<span id="cb3-100"><a href="#cb3-100"></a>  <span class="st">&quot;      'deferRender': true,&quot;</span>,</span>
<span id="cb3-101"><a href="#cb3-101"></a>  <span class="st">&quot;      'info': false,&quot;</span>,</span>
<span id="cb3-102"><a href="#cb3-102"></a>  <span class="st">&quot;      'lengthChange': false,&quot;</span>,</span>
<span id="cb3-103"><a href="#cb3-103"></a>  <span class="st">&quot;      'ordering': data.length &gt; 1,&quot;</span>,</span>
<span id="cb3-104"><a href="#cb3-104"></a>  <span class="st">&quot;      'order': [],&quot;</span>,</span>
<span id="cb3-105"><a href="#cb3-105"></a>  <span class="st">&quot;      'paging': false,&quot;</span>,</span>
<span id="cb3-106"><a href="#cb3-106"></a>  <span class="st">&quot;      'scrollX': false,&quot;</span>,</span>
<span id="cb3-107"><a href="#cb3-107"></a>  <span class="st">&quot;      'scrollY': false,&quot;</span>,</span>
<span id="cb3-108"><a href="#cb3-108"></a>  <span class="st">&quot;      'searching': false,&quot;</span>,</span>
<span id="cb3-109"><a href="#cb3-109"></a>  <span class="st">&quot;      'sortClasses': false,&quot;</span>,</span>
<span id="cb3-110"><a href="#cb3-110"></a>  <span class="st">&quot;      'rowCallback': rowCallback,&quot;</span>,</span>
<span id="cb3-111"><a href="#cb3-111"></a>  <span class="st">&quot;      'headerCallback': headerCallback,&quot;</span>,</span>
<span id="cb3-112"><a href="#cb3-112"></a>  <span class="st">&quot;      'columnDefs': [&quot;</span>, </span>
<span id="cb3-113"><a href="#cb3-113"></a>  <span class="st">&quot;        {targets: -1, visible: false},&quot;</span>, </span>
<span id="cb3-114"><a href="#cb3-114"></a>  <span class="st">&quot;        {targets: 0, orderable: false, className: 'details-control'},&quot;</span>, </span>
<span id="cb3-115"><a href="#cb3-115"></a>  <span class="st">&quot;        {targets: '_all', className: 'dt-center'}&quot;</span>,</span>
<span id="cb3-116"><a href="#cb3-116"></a>  <span class="st">&quot;      ]&quot;</span>,</span>
<span id="cb3-117"><a href="#cb3-117"></a>  <span class="st">&quot;    }).column(0).nodes().to$().css({cursor: 'pointer'});&quot;</span>,</span>
<span id="cb3-118"><a href="#cb3-118"></a>  <span class="st">&quot;  }&quot;</span>,</span>
<span id="cb3-119"><a href="#cb3-119"></a>  <span class="st">&quot;};&quot;</span>,</span>
<span id="cb3-120"><a href="#cb3-120"></a>  <span class="st">&quot;&quot;</span>,</span>
<span id="cb3-121"><a href="#cb3-121"></a>  <span class="st">&quot;// --- display the child table on click --- //&quot;</span>,</span>
<span id="cb3-122"><a href="#cb3-122"></a>  <span class="st">&quot;// array to store id's of already created child tables&quot;</span>,</span>
<span id="cb3-123"><a href="#cb3-123"></a>  <span class="st">&quot;var children = [];&quot;</span>, </span>
<span id="cb3-124"><a href="#cb3-124"></a>  <span class="st">&quot;table.on('click', 'td.details-control', function(){&quot;</span>,</span>
<span id="cb3-125"><a href="#cb3-125"></a>  <span class="st">&quot;  var tbl = $(this).closest('table'),&quot;</span>,</span>
<span id="cb3-126"><a href="#cb3-126"></a>  <span class="st">&quot;      tblId = tbl.attr('id'),&quot;</span>,</span>
<span id="cb3-127"><a href="#cb3-127"></a>  <span class="st">&quot;      td = $(this),&quot;</span>,</span>
<span id="cb3-128"><a href="#cb3-128"></a>  <span class="st">&quot;      row = $(tbl).DataTable().row(td.closest('tr')),&quot;</span>,</span>
<span id="cb3-129"><a href="#cb3-129"></a>  <span class="st">&quot;      rowIdx = row.index();&quot;</span>,</span>
<span id="cb3-130"><a href="#cb3-130"></a>  <span class="st">&quot;  if(row.child.isShown()){&quot;</span>,</span>
<span id="cb3-131"><a href="#cb3-131"></a>  <span class="st">&quot;    row.child.hide();&quot;</span>,</span>
<span id="cb3-132"><a href="#cb3-132"></a>  <span class="st">&quot;    td.html('&amp;oplus;');&quot;</span>,</span>
<span id="cb3-133"><a href="#cb3-133"></a>  <span class="st">&quot;  } else {&quot;</span>,</span>
<span id="cb3-134"><a href="#cb3-134"></a>  <span class="st">&quot;    var childId = tblId + '-child-' + rowIdx;&quot;</span>,</span>
<span id="cb3-135"><a href="#cb3-135"></a>  <span class="st">&quot;    if(children.indexOf(childId) === -1){&quot;</span>, </span>
<span id="cb3-136"><a href="#cb3-136"></a>  <span class="st">&quot;      // this child has not been created yet&quot;</span>,</span>
<span id="cb3-137"><a href="#cb3-137"></a>  <span class="st">&quot;      children.push(childId);&quot;</span>,</span>
<span id="cb3-138"><a href="#cb3-138"></a>  <span class="st">&quot;      row.child(formatHeader(row.data(), childId)).show();&quot;</span>,</span>
<span id="cb3-139"><a href="#cb3-139"></a>  <span class="st">&quot;      td.html('&amp;CircleMinus;');&quot;</span>,</span>
<span id="cb3-140"><a href="#cb3-140"></a>  <span class="st">&quot;      formatDatatable(row.data(), childId, rowIdx);&quot;</span>,</span>
<span id="cb3-141"><a href="#cb3-141"></a>  <span class="st">&quot;    }else{&quot;</span>,</span>
<span id="cb3-142"><a href="#cb3-142"></a>  <span class="st">&quot;      // this child has already been created&quot;</span>,</span>
<span id="cb3-143"><a href="#cb3-143"></a>  <span class="st">&quot;      row.child(true);&quot;</span>,</span>
<span id="cb3-144"><a href="#cb3-144"></a>  <span class="st">&quot;      td.html('&amp;CircleMinus;');&quot;</span>,</span>
<span id="cb3-145"><a href="#cb3-145"></a>  <span class="st">&quot;    }&quot;</span>,</span>
<span id="cb3-146"><a href="#cb3-146"></a>  <span class="st">&quot;  }&quot;</span>,</span>
<span id="cb3-147"><a href="#cb3-147"></a>  <span class="st">&quot;});&quot;</span>)</span></code></pre></div>
<p>Now, here is the code which generates the table. The first column contains some HTML (⊕) so we have to not escape it. The last column contains the child data, it has to be hidden. Finally we assign the class <code>details-control</code> to the first column, this is used by the callback.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="kw">datatable</span>(</span>
<span id="cb4-2"><a href="#cb4-2"></a>  Dat, </span>
<span id="cb4-3"><a href="#cb4-3"></a>  <span class="dt">callback =</span> callback, <span class="dt">rownames =</span> rowNames, <span class="dt">escape =</span> <span class="op">-</span>colIdx<span class="dv">-1</span>,</span>
<span id="cb4-4"><a href="#cb4-4"></a>  <span class="dt">options =</span> <span class="kw">list</span>(</span>
<span id="cb4-5"><a href="#cb4-5"></a>    <span class="dt">paging =</span> <span class="ot">FALSE</span>,</span>
<span id="cb4-6"><a href="#cb4-6"></a>    <span class="dt">searching =</span> <span class="ot">FALSE</span>,</span>
<span id="cb4-7"><a href="#cb4-7"></a>    <span class="dt">columnDefs =</span> <span class="kw">list</span>(</span>
<span id="cb4-8"><a href="#cb4-8"></a>      <span class="kw">list</span>(</span>
<span id="cb4-9"><a href="#cb4-9"></a>        <span class="dt">visible =</span> <span class="ot">FALSE</span>, </span>
<span id="cb4-10"><a href="#cb4-10"></a>        <span class="dt">targets =</span> <span class="kw">ncol</span>(Dat)<span class="op">-</span><span class="dv">1</span><span class="op">+</span>colIdx</span>
<span id="cb4-11"><a href="#cb4-11"></a>      ),</span>
<span id="cb4-12"><a href="#cb4-12"></a>      <span class="kw">list</span>(</span>
<span id="cb4-13"><a href="#cb4-13"></a>        <span class="dt">orderable =</span> <span class="ot">FALSE</span>, </span>
<span id="cb4-14"><a href="#cb4-14"></a>        <span class="dt">className =</span> <span class="st">&quot;details-control&quot;</span>, </span>
<span id="cb4-15"><a href="#cb4-15"></a>        <span class="dt">targets =</span> colIdx</span>
<span id="cb4-16"><a href="#cb4-16"></a>      ),</span>
<span id="cb4-17"><a href="#cb4-17"></a>      <span class="kw">list</span>(</span>
<span id="cb4-18"><a href="#cb4-18"></a>        <span class="dt">className =</span> <span class="st">&quot;dt-center&quot;</span>, </span>
<span id="cb4-19"><a href="#cb4-19"></a>        <span class="dt">targets =</span> <span class="st">&quot;_all&quot;</span></span>
<span id="cb4-20"><a href="#cb4-20"></a>      )</span>
<span id="cb4-21"><a href="#cb4-21"></a>    )</span>
<span id="cb4-22"><a href="#cb4-22"></a>  )</span>
<span id="cb4-23"><a href="#cb4-23"></a>)</span></code></pre></div>
<p><img src="figures/DTchildRows1.gif" /></p>
<h1 id="editing">Editing</h1>
<p>We use the JavaScript library <a href="https://github.com/ejbeaty/CellEdit">CellEdit</a> to allow cells, including the cells of the child tables, to be editable. Download the file <strong>dataTables.cellEdit.js</strong>.</p>
<p>Some CSS is required in order to make things pretty. Save the following CSS code in a file <strong>dataTables.cellEdit.css</strong>.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode css"><code class="sourceCode css"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true"></a><span class="fu">.my-input-class</span> {</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true"></a>  <span class="kw">padding</span>: <span class="dv">3</span><span class="dt">px</span> <span class="dv">6</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true"></a>  <span class="kw">border</span>: <span class="dv">1</span><span class="dt">px</span> <span class="dv">solid</span> <span class="cn">#ccc</span><span class="op">;</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true"></a>  <span class="kw">border-radius</span>: <span class="dv">4</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true"></a>  <span class="kw">width</span>: <span class="dv">60</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true"></a>}</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true"></a></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true"></a><span class="fu">.my-confirm-class</span> {</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true"></a>  <span class="kw">padding</span>: <span class="dv">3</span><span class="dt">px</span> <span class="dv">6</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true"></a>  <span class="kw">font-size</span>: <span class="dv">12</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true"></a>  <span class="kw">color</span>: <span class="cn">white</span><span class="op">;</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true"></a>  <span class="kw">text-align</span>: <span class="dv">center</span><span class="op">;</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true"></a>  <span class="kw">vertical-align</span>: <span class="dv">middle</span><span class="op">;</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true"></a>  <span class="kw">border-radius</span>: <span class="dv">4</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true"></a>  <span class="kw">background-color</span>: <span class="cn">#337ab7</span><span class="op">;</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true"></a>  <span class="kw">text-decoration</span>: <span class="dv">none</span><span class="op">;</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true"></a>}</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true"></a></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true"></a><span class="fu">.my-cancel-class</span> {</span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true"></a>  <span class="kw">padding</span>: <span class="dv">3</span><span class="dt">px</span> <span class="dv">6</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true"></a>  <span class="kw">font-size</span>: <span class="dv">12</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true"></a>  <span class="kw">color</span>: <span class="cn">white</span><span class="op">;</span></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true"></a>  <span class="kw">text-align</span>: <span class="dv">center</span><span class="op">;</span></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true"></a>  <span class="kw">vertical-align</span>: <span class="dv">middle</span><span class="op">;</span></span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true"></a>  <span class="kw">border-radius</span>: <span class="dv">4</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true"></a>  <span class="kw">background-color</span>: <span class="cn">#a94442</span><span class="op">;</span></span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true"></a>  <span class="kw">text-decoration</span>: <span class="dv">none</span><span class="op">;</span></span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true"></a>}</span></code></pre></div>
<p>Now modify the callback as follows:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>callback &lt;-<span class="st"> </span><span class="kw">JS</span>(</span>
<span id="cb6-2"><a href="#cb6-2"></a>  <span class="st">&quot;function onUpdate(updatedCell, updatedRow, oldValue) {};&quot;</span>,</span>
<span id="cb6-3"><a href="#cb6-3"></a>  <span class="st">&quot;table.MakeCellsEditable({&quot;</span>,</span>
<span id="cb6-4"><a href="#cb6-4"></a>  <span class="st">&quot;  onUpdate: onUpdate,&quot;</span>,</span>
<span id="cb6-5"><a href="#cb6-5"></a>  <span class="st">&quot;  inputCss: 'my-input-class',&quot;</span>,</span>
<span id="cb6-6"><a href="#cb6-6"></a>  <span class="st">&quot;  confirmationButton: {&quot;</span>,</span>
<span id="cb6-7"><a href="#cb6-7"></a>  <span class="st">&quot;    confirmCss: 'my-confirm-class',&quot;</span>,</span>
<span id="cb6-8"><a href="#cb6-8"></a>  <span class="st">&quot;    cancelCss: 'my-cancel-class'&quot;</span>,</span>
<span id="cb6-9"><a href="#cb6-9"></a>  <span class="st">&quot;  }&quot;</span>,</span>
<span id="cb6-10"><a href="#cb6-10"></a>  <span class="st">&quot;});&quot;</span>,</span>
<span id="cb6-11"><a href="#cb6-11"></a>  <span class="kw">sprintf</span>(<span class="st">&quot;var parentRows = [%s];&quot;</span>, <span class="kw">toString</span>(parentRows<span class="dv">-1</span>)),</span>
<span id="cb6-12"><a href="#cb6-12"></a>  </span>
<span id="cb6-13"><a href="#cb6-13"></a>  ......</span>
<span id="cb6-14"><a href="#cb6-14"></a>  </span>
<span id="cb6-15"><a href="#cb6-15"></a>  <span class="st">&quot;// --- make the datatable --- //&quot;</span>,</span>
<span id="cb6-16"><a href="#cb6-16"></a>  <span class="st">&quot;var formatDatatable = function(d, childId){&quot;</span>,</span>
<span id="cb6-17"><a href="#cb6-17"></a>  </span>
<span id="cb6-18"><a href="#cb6-18"></a>  ......</span>
<span id="cb6-19"><a href="#cb6-19"></a></span>
<span id="cb6-20"><a href="#cb6-20"></a>  <span class="st">&quot;    }).column(0).nodes().to$().css({cursor: 'pointer'});&quot;</span>,</span>
<span id="cb6-21"><a href="#cb6-21"></a>  <span class="st">&quot;  }&quot;</span>,</span>
<span id="cb6-22"><a href="#cb6-22"></a>  <span class="st">&quot;  subtable.MakeCellsEditable({&quot;</span>,</span>
<span id="cb6-23"><a href="#cb6-23"></a>  <span class="st">&quot;    onUpdate: onUpdate,&quot;</span>,</span>
<span id="cb6-24"><a href="#cb6-24"></a>  <span class="st">&quot;    inputCss: 'my-input-class',&quot;</span>,</span>
<span id="cb6-25"><a href="#cb6-25"></a>  <span class="st">&quot;    confirmationButton: {&quot;</span>,</span>
<span id="cb6-26"><a href="#cb6-26"></a>  <span class="st">&quot;      confirmCss: 'my-confirm-class',&quot;</span>,</span>
<span id="cb6-27"><a href="#cb6-27"></a>  <span class="st">&quot;      cancelCss: 'my-cancel-class'&quot;</span>,</span>
<span id="cb6-28"><a href="#cb6-28"></a>  <span class="st">&quot;    }&quot;</span>,</span>
<span id="cb6-29"><a href="#cb6-29"></a>  <span class="st">&quot;  });&quot;</span>,</span>
<span id="cb6-30"><a href="#cb6-30"></a>  <span class="st">&quot;};&quot;</span>,</span>
<span id="cb6-31"><a href="#cb6-31"></a>  <span class="st">&quot;&quot;</span>,</span>
<span id="cb6-32"><a href="#cb6-32"></a>  <span class="st">&quot;// --- display the child table on click --- //&quot;</span>,</span>
<span id="cb6-33"><a href="#cb6-33"></a></span>
<span id="cb6-34"><a href="#cb6-34"></a>  ......</span>
<span id="cb6-35"><a href="#cb6-35"></a>  </span>
<span id="cb6-36"><a href="#cb6-36"></a>  <span class="st">&quot;});&quot;</span>)</span></code></pre></div>
<p>Use the same code as before to generate the table but store the output:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>dtable &lt;-<span class="st"> </span><span class="kw">datatable</span>(</span>
<span id="cb7-2"><a href="#cb7-2"></a>  Dat, </span>
<span id="cb7-3"><a href="#cb7-3"></a>  <span class="dt">callback =</span> callback, <span class="dt">rownames =</span> rowNames, <span class="dt">escape =</span> <span class="op">-</span>colIdx<span class="dv">-1</span>,</span>
<span id="cb7-4"><a href="#cb7-4"></a>  <span class="dt">options =</span> <span class="kw">list</span>(</span>
<span id="cb7-5"><a href="#cb7-5"></a>    <span class="dt">paging =</span> <span class="ot">FALSE</span>,</span>
<span id="cb7-6"><a href="#cb7-6"></a>    <span class="dt">searching =</span> <span class="ot">FALSE</span>,</span>
<span id="cb7-7"><a href="#cb7-7"></a>    <span class="dt">columnDefs =</span> <span class="kw">list</span>(</span>
<span id="cb7-8"><a href="#cb7-8"></a>      <span class="kw">list</span>(</span>
<span id="cb7-9"><a href="#cb7-9"></a>        <span class="dt">visible =</span> <span class="ot">FALSE</span>, </span>
<span id="cb7-10"><a href="#cb7-10"></a>        <span class="dt">targets =</span> <span class="kw">ncol</span>(Dat)<span class="op">-</span><span class="dv">1</span><span class="op">+</span>colIdx</span>
<span id="cb7-11"><a href="#cb7-11"></a>      ),</span>
<span id="cb7-12"><a href="#cb7-12"></a>      <span class="kw">list</span>(</span>
<span id="cb7-13"><a href="#cb7-13"></a>        <span class="dt">orderable =</span> <span class="ot">FALSE</span>, </span>
<span id="cb7-14"><a href="#cb7-14"></a>        <span class="dt">className =</span> <span class="st">&quot;details-control&quot;</span>, </span>
<span id="cb7-15"><a href="#cb7-15"></a>        <span class="dt">targets =</span> colIdx</span>
<span id="cb7-16"><a href="#cb7-16"></a>      ),</span>
<span id="cb7-17"><a href="#cb7-17"></a>      <span class="kw">list</span>(</span>
<span id="cb7-18"><a href="#cb7-18"></a>        <span class="dt">className =</span> <span class="st">&quot;dt-center&quot;</span>, </span>
<span id="cb7-19"><a href="#cb7-19"></a>        <span class="dt">targets =</span> <span class="st">&quot;_all&quot;</span></span>
<span id="cb7-20"><a href="#cb7-20"></a>      )</span>
<span id="cb7-21"><a href="#cb7-21"></a>    )</span>
<span id="cb7-22"><a href="#cb7-22"></a>  )</span>
<span id="cb7-23"><a href="#cb7-23"></a>)</span></code></pre></div>
<p>Now we add the dependencies to the <code>datatable</code>:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a>path &lt;-<span class="st"> &quot;path/to/cellEdit&quot;</span> <span class="co"># folder containing the files </span></span>
<span id="cb8-2"><a href="#cb8-2"></a>                           <span class="co"># dataTables.cellEdit.js and </span></span>
<span id="cb8-3"><a href="#cb8-3"></a>                           <span class="co"># dataTables.cellEdit.css</span></span>
<span id="cb8-4"><a href="#cb8-4"></a>dep &lt;-<span class="st"> </span>htmltools<span class="op">::</span><span class="kw">htmlDependency</span>(</span>
<span id="cb8-5"><a href="#cb8-5"></a>  <span class="st">&quot;CellEdit&quot;</span>, <span class="st">&quot;1.0.19&quot;</span>, path, </span>
<span id="cb8-6"><a href="#cb8-6"></a>  <span class="dt">script =</span> <span class="st">&quot;dataTables.cellEdit.js&quot;</span>, </span>
<span id="cb8-7"><a href="#cb8-7"></a>  <span class="dt">stylesheet =</span> <span class="st">&quot;dataTables.cellEdit.css&quot;</span>)</span>
<span id="cb8-8"><a href="#cb8-8"></a>dtable<span class="op">$</span>dependencies &lt;-<span class="st"> </span><span class="kw">c</span>(dtable<span class="op">$</span>dependencies, <span class="kw">list</span>(dep))</span>
<span id="cb8-9"><a href="#cb8-9"></a></span>
<span id="cb8-10"><a href="#cb8-10"></a>dtable</span></code></pre></div>
<p><img src="figures/DTchildRows2.gif" /></p>
<h1 id="exporting">Exporting</h1>
<p>Now we show how to export a table with its child tables to an Excel file, when there is only one level of child tables (<em>i.e.</em> when the child tables of the main table do not have child tables themselves). To do so, we use the <code>customize</code> callback of the Excel button provided by the <code>Buttons</code> extension. I found this code on the DataTables forum. In the first row of the callback, <code>mytable</code> is the id of the datatable:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true"></a><span class="kw">var</span> table <span class="op">=</span> <span class="fu">$</span>(<span class="st">'#mytable'</span>)<span class="op">.</span><span class="fu">find</span>(<span class="st">'table'</span>)<span class="op">.</span><span class="fu">DataTable</span>()<span class="op">;</span></span></code></pre></div>
<p>If you don’t use Shiny, you have to set this id in the <code>elementId</code> argument of the <code>datatable</code> function. If you use Shiny, this id is the key of the element of the <code>output</code> object in which you assign a <code>renderDT</code>:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true"></a>output[[<span class="st">&quot;mytable&quot;</span>]] &lt;-<span class="st"> </span><span class="kw">renderDT</span>({</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true"></a>  ......</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true"></a>})</span></code></pre></div>
<p>The JavaScript code depends on whether the user desires a title in the Excel file, so this information has to be provided first.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a>excelTitle =<span class="st"> </span><span class="ot">NULL</span> <span class="co"># enter title or set to NULL if you don't want a title</span></span>
<span id="cb11-2"><a href="#cb11-2"></a>js_customXLSX &lt;-<span class="st"> </span><span class="kw">JS</span>(</span>
<span id="cb11-3"><a href="#cb11-3"></a>  <span class="st">&quot;function(xlsx){&quot;</span>,</span>
<span id="cb11-4"><a href="#cb11-4"></a>  <span class="st">&quot;  var table = $('#mytable').find('table').DataTable();&quot;</span>,</span>
<span id="cb11-5"><a href="#cb11-5"></a>  <span class="st">&quot;  // Number of columns.&quot;</span>,</span>
<span id="cb11-6"><a href="#cb11-6"></a>  <span class="kw">sprintf</span>(<span class="st">&quot;  var ncols = %d;&quot;</span>, <span class="kw">ncol</span>(Dat)),</span>
<span id="cb11-7"><a href="#cb11-7"></a>  <span class="st">&quot;  // Is there a title?&quot;</span>,</span>
<span id="cb11-8"><a href="#cb11-8"></a>  <span class="kw">sprintf</span>(<span class="st">&quot;  var title = %s;&quot;</span>, </span>
<span id="cb11-9"><a href="#cb11-9"></a>          <span class="kw">ifelse</span>(<span class="kw">is.null</span>(excelTitle), <span class="st">&quot;false&quot;</span>, <span class="st">&quot;true&quot;</span>)),</span>
<span id="cb11-10"><a href="#cb11-10"></a>  <span class="st">&quot;  // Integer to Excel column: 0 -&gt; A, 1 -&gt; B, ..., 25 -&gt; Z, 26 -&gt; AA, ...&quot;</span>,</span>
<span id="cb11-11"><a href="#cb11-11"></a>  <span class="st">&quot;  var XLcolumn = function(j){&quot;</span>, </span>
<span id="cb11-12"><a href="#cb11-12"></a>  <span class="st">&quot;    return j &lt; 0 ? &quot;</span>,</span>
<span id="cb11-13"><a href="#cb11-13"></a>  <span class="st">&quot;      '' : XLcolumn(j/26-1) + String.fromCharCode(j % 26 + 65);&quot;</span>,</span>
<span id="cb11-14"><a href="#cb11-14"></a>  <span class="st">&quot;  };&quot;</span>,</span>
<span id="cb11-15"><a href="#cb11-15"></a>  <span class="st">&quot;  // Get sheet.&quot;</span>,</span>
<span id="cb11-16"><a href="#cb11-16"></a>  <span class="st">&quot;  var sheet = xlsx.xl.worksheets['sheet1.xml'];&quot;</span>,</span>
<span id="cb11-17"><a href="#cb11-17"></a>  <span class="st">&quot;  // Get a clone of the sheet data.        &quot;</span>,</span>
<span id="cb11-18"><a href="#cb11-18"></a>  <span class="st">&quot;  var sheetData = $('sheetData', sheet).clone();&quot;</span>,</span>
<span id="cb11-19"><a href="#cb11-19"></a>  <span class="st">&quot;  // Clear the current sheet data for appending rows.&quot;</span>,</span>
<span id="cb11-20"><a href="#cb11-20"></a>  <span class="st">&quot;  $('sheetData', sheet).empty();&quot;</span>,</span>
<span id="cb11-21"><a href="#cb11-21"></a>  <span class="st">&quot;  // Row count in Excel sheet.&quot;</span>,</span>
<span id="cb11-22"><a href="#cb11-22"></a>  <span class="st">&quot;  var rowCount = 1;&quot;</span>,</span>
<span id="cb11-23"><a href="#cb11-23"></a>  <span class="st">&quot;  // Iterate each row in the sheet data.&quot;</span>,</span>
<span id="cb11-24"><a href="#cb11-24"></a>  <span class="st">&quot;  $(sheetData).children().each(function (index) {&quot;</span>,</span>
<span id="cb11-25"><a href="#cb11-25"></a>  <span class="st">&quot;    // Used for DT row() API to get child data.&quot;</span>,</span>
<span id="cb11-26"><a href="#cb11-26"></a>  <span class="st">&quot;    var rowIndex = title ? index - 2 : index - 1;&quot;</span>, </span>
<span id="cb11-27"><a href="#cb11-27"></a>  <span class="st">&quot;    // Don't process row if it's the title row or the header row.&quot;</span>,</span>
<span id="cb11-28"><a href="#cb11-28"></a>  <span class="st">&quot;    var i0 = title ? 1 : 0;&quot;</span>,</span>
<span id="cb11-29"><a href="#cb11-29"></a>  <span class="st">&quot;    if (index &gt; i0) {&quot;</span>, </span>
<span id="cb11-30"><a href="#cb11-30"></a>  <span class="st">&quot;      // Get row&quot;</span>,</span>
<span id="cb11-31"><a href="#cb11-31"></a>  <span class="st">&quot;      var row = $(this.outerHTML);&quot;</span>,</span>
<span id="cb11-32"><a href="#cb11-32"></a>  <span class="st">&quot;      // Set the Excel row attr to the current Excel row count.&quot;</span>,</span>
<span id="cb11-33"><a href="#cb11-33"></a>  <span class="st">&quot;      row.attr('r', rowCount);&quot;</span>,</span>
<span id="cb11-34"><a href="#cb11-34"></a>  <span class="st">&quot;      // Iterate each cell in the row to change the row number.&quot;</span>,</span>
<span id="cb11-35"><a href="#cb11-35"></a>  <span class="st">&quot;      row.children().each(function (index) {&quot;</span>,</span>
<span id="cb11-36"><a href="#cb11-36"></a>  <span class="st">&quot;        var cell = $(this);&quot;</span>,</span>
<span id="cb11-37"><a href="#cb11-37"></a>  <span class="st">&quot;        // Set each cell's row value.&quot;</span>,</span>
<span id="cb11-38"><a href="#cb11-38"></a>  <span class="st">&quot;        var rc = cell.attr('r');&quot;</span>,</span>
<span id="cb11-39"><a href="#cb11-39"></a>  <span class="st">&quot;        rc = rc.replace(/</span><span class="ch">\\</span><span class="st">d+$/, </span><span class="ch">\&quot;\&quot;</span><span class="st">) + rowCount;&quot;</span>,</span>
<span id="cb11-40"><a href="#cb11-40"></a>  <span class="st">&quot;        cell.attr('r', rc);&quot;</span>,</span>
<span id="cb11-41"><a href="#cb11-41"></a>  <span class="st">&quot;      });&quot;</span>,</span>
<span id="cb11-42"><a href="#cb11-42"></a>  <span class="st">&quot;      // Get the row HTML and append to sheetData.&quot;</span>,</span>
<span id="cb11-43"><a href="#cb11-43"></a>  <span class="st">&quot;      row = row[0].outerHTML;&quot;</span>,</span>
<span id="cb11-44"><a href="#cb11-44"></a>  <span class="st">&quot;      $('sheetData', sheet).append(row);&quot;</span>,</span>
<span id="cb11-45"><a href="#cb11-45"></a>  <span class="st">&quot;      rowCount++;&quot;</span>,</span>
<span id="cb11-46"><a href="#cb11-46"></a>  <span class="st">&quot;      // Get the child data - could be any data attached to the row.&quot;</span>,</span>
<span id="cb11-47"><a href="#cb11-47"></a>  <span class="st">&quot;      var data = table.row(':eq(' + rowIndex + ')').data();&quot;</span>,</span>
<span id="cb11-48"><a href="#cb11-48"></a>  <span class="st">&quot;      var childData = data[ncols-1];&quot;</span>, </span>
<span id="cb11-49"><a href="#cb11-49"></a>  <span class="st">&quot;      if(childData.length &gt; 0){&quot;</span>,</span>
<span id="cb11-50"><a href="#cb11-50"></a>  <span class="st">&quot;        var colNames = Object.keys(childData[0]);&quot;</span>,</span>
<span id="cb11-51"><a href="#cb11-51"></a>  <span class="st">&quot;        // Prepare Excel formatted row&quot;</span>,</span>
<span id="cb11-52"><a href="#cb11-52"></a>  <span class="st">&quot;        var headerRow = '&lt;row r=</span><span class="ch">\&quot;</span><span class="st">' + rowCount +&quot;</span>,</span>
<span id="cb11-53"><a href="#cb11-53"></a>  <span class="st">&quot;          '</span><span class="ch">\&quot;</span><span class="st">&gt;&lt;c t=</span><span class="ch">\&quot;</span><span class="st">inlineStr</span><span class="ch">\&quot;</span><span class="st"> r=</span><span class="ch">\&quot;</span><span class="st">A' + rowCount +&quot;</span>,</span>
<span id="cb11-54"><a href="#cb11-54"></a>  <span class="st">&quot;          '</span><span class="ch">\&quot;</span><span class="st">&gt;&lt;is&gt;&lt;t&gt;&lt;/t&gt;&lt;/is&gt;&lt;/c&gt;';&quot;</span>,</span>
<span id="cb11-55"><a href="#cb11-55"></a>  <span class="st">&quot;        for(let i = 0; i &lt; colNames.length; i++){&quot;</span>,</span>
<span id="cb11-56"><a href="#cb11-56"></a>  <span class="st">&quot;          headerRow = headerRow +&quot;</span>,</span>
<span id="cb11-57"><a href="#cb11-57"></a>  <span class="st">&quot;            '&lt;c t=</span><span class="ch">\&quot;</span><span class="st">inlineStr</span><span class="ch">\&quot;</span><span class="st"> r=</span><span class="ch">\&quot;</span><span class="st">' + XLcolumn(i+1) + rowCount +&quot;</span>,</span>
<span id="cb11-58"><a href="#cb11-58"></a>  <span class="st">&quot;            '</span><span class="ch">\&quot;</span><span class="st"> s=</span><span class="ch">\&quot;</span><span class="st">7</span><span class="ch">\&quot;</span><span class="st">&gt;&lt;is&gt;&lt;t&gt;' + colNames[i] +&quot;</span>, </span>
<span id="cb11-59"><a href="#cb11-59"></a>  <span class="st">&quot;            '&lt;/t&gt;&lt;/is&gt;&lt;/c&gt;';&quot;</span>,</span>
<span id="cb11-60"><a href="#cb11-60"></a>  <span class="st">&quot;        }&quot;</span>,</span>
<span id="cb11-61"><a href="#cb11-61"></a>  <span class="st">&quot;        headerRow = headerRow + '&lt;/row&gt;';&quot;</span>,</span>
<span id="cb11-62"><a href="#cb11-62"></a>  <span class="st">&quot;        // Append header row to sheetData.&quot;</span>,</span>
<span id="cb11-63"><a href="#cb11-63"></a>  <span class="st">&quot;        $('sheetData', sheet).append(headerRow);&quot;</span>,</span>
<span id="cb11-64"><a href="#cb11-64"></a>  <span class="st">&quot;        rowCount++; // Increment excel row counter.&quot;</span>,</span>
<span id="cb11-65"><a href="#cb11-65"></a>  <span class="st">&quot;      }&quot;</span>,</span>
<span id="cb11-66"><a href="#cb11-66"></a>  <span class="st">&quot;      // The child data is an array of rows&quot;</span>,</span>
<span id="cb11-67"><a href="#cb11-67"></a>  <span class="st">&quot;      for(let c = 0; c &lt; childData.length; c++){&quot;</span>,</span>
<span id="cb11-68"><a href="#cb11-68"></a>  <span class="st">&quot;        // Get row data.&quot;</span>,</span>
<span id="cb11-69"><a href="#cb11-69"></a>  <span class="st">&quot;        var child = childData[c];&quot;</span>,</span>
<span id="cb11-70"><a href="#cb11-70"></a>  <span class="st">&quot;        // Prepare Excel formatted row&quot;</span>,</span>
<span id="cb11-71"><a href="#cb11-71"></a>  <span class="st">&quot;        var childRow = '&lt;row r=</span><span class="ch">\&quot;</span><span class="st">' + rowCount +&quot;</span>,</span>
<span id="cb11-72"><a href="#cb11-72"></a>  <span class="st">&quot;          '</span><span class="ch">\&quot;</span><span class="st">&gt;&lt;c t=</span><span class="ch">\&quot;</span><span class="st">inlineStr</span><span class="ch">\&quot;</span><span class="st"> r=</span><span class="ch">\&quot;</span><span class="st">A' + rowCount +&quot;</span>,</span>
<span id="cb11-73"><a href="#cb11-73"></a>  <span class="st">&quot;          '</span><span class="ch">\&quot;</span><span class="st">&gt;&lt;is&gt;&lt;t&gt;&lt;/t&gt;&lt;/is&gt;&lt;/c&gt;';&quot;</span>,</span>
<span id="cb11-74"><a href="#cb11-74"></a>  <span class="st">&quot;        for(let i = 0; i &lt; colNames.length; i++){&quot;</span>,</span>
<span id="cb11-75"><a href="#cb11-75"></a>  <span class="st">&quot;          childRow = childRow +&quot;</span>,</span>
<span id="cb11-76"><a href="#cb11-76"></a>  <span class="st">&quot;            '&lt;c t=</span><span class="ch">\&quot;</span><span class="st">inlineStr</span><span class="ch">\&quot;</span><span class="st"> r=</span><span class="ch">\&quot;</span><span class="st">' + XLcolumn(i+1) + rowCount +&quot;</span>,</span>
<span id="cb11-77"><a href="#cb11-77"></a>  <span class="st">&quot;            '</span><span class="ch">\&quot;</span><span class="st"> s=</span><span class="ch">\&quot;</span><span class="st">5</span><span class="ch">\&quot;</span><span class="st">&gt;&lt;is&gt;&lt;t&gt;' + child[colNames[i]] +&quot;</span>, </span>
<span id="cb11-78"><a href="#cb11-78"></a>  <span class="st">&quot;            '&lt;/t&gt;&lt;/is&gt;&lt;/c&gt;';&quot;</span>,</span>
<span id="cb11-79"><a href="#cb11-79"></a>  <span class="st">&quot;        }&quot;</span>,</span>
<span id="cb11-80"><a href="#cb11-80"></a>  <span class="st">&quot;        childRow = childRow + '&lt;/row&gt;';&quot;</span>,</span>
<span id="cb11-81"><a href="#cb11-81"></a>  <span class="st">&quot;        // Append row to sheetData.&quot;</span>,</span>
<span id="cb11-82"><a href="#cb11-82"></a>  <span class="st">&quot;        $('sheetData', sheet).append(childRow);&quot;</span>,</span>
<span id="cb11-83"><a href="#cb11-83"></a>  <span class="st">&quot;        rowCount++; // Increment excel row counter.&quot;</span>,</span>
<span id="cb11-84"><a href="#cb11-84"></a>  <span class="st">&quot;      }&quot;</span>,</span>
<span id="cb11-85"><a href="#cb11-85"></a>  <span class="st">&quot;      // Just append the header row and increment excel row counter.&quot;</span>,</span>
<span id="cb11-86"><a href="#cb11-86"></a>  <span class="st">&quot;    } else {&quot;</span>,</span>
<span id="cb11-87"><a href="#cb11-87"></a>  <span class="st">&quot;      $('sheetData', sheet).append(this.outerHTML);&quot;</span>,</span>
<span id="cb11-88"><a href="#cb11-88"></a>  <span class="st">&quot;      rowCount++;&quot;</span>,</span>
<span id="cb11-89"><a href="#cb11-89"></a>  <span class="st">&quot;    }&quot;</span>,</span>
<span id="cb11-90"><a href="#cb11-90"></a>  <span class="st">&quot;  });&quot;</span>,</span>
<span id="cb11-91"><a href="#cb11-91"></a>  <span class="st">&quot;}&quot;</span></span>
<span id="cb11-92"><a href="#cb11-92"></a>)</span></code></pre></div>
<p>Let’s see an example.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a>dat0  =<span class="st"> </span>iris[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>,]         <span class="co"># main table, with three rows</span></span>
<span id="cb12-2"><a href="#cb12-2"></a>dat01 =<span class="st"> </span>airquality[<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>,]   <span class="co"># |- child of first row</span></span>
<span id="cb12-3"><a href="#cb12-3"></a>dat02 =<span class="st"> </span>cars[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>,]         <span class="co"># |- child of second row</span></span>
<span id="cb12-4"><a href="#cb12-4"></a>dat03 =<span class="st"> </span>PlantGrowth[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>,]  <span class="co"># |- child of third row</span></span>
<span id="cb12-5"><a href="#cb12-5"></a>Dat &lt;-<span class="st"> </span><span class="kw">NestedData</span>(</span>
<span id="cb12-6"><a href="#cb12-6"></a>  <span class="dt">dat =</span> dat0, </span>
<span id="cb12-7"><a href="#cb12-7"></a>  <span class="dt">children =</span> <span class="kw">list</span>(dat01, dat02, dat03)</span>
<span id="cb12-8"><a href="#cb12-8"></a>)</span></code></pre></div>
<p>Below is the code generating the table with a button for the exporting. Remember, if you use Shiny, do not set <code>elementId</code>.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a>dtable &lt;-<span class="st"> </span><span class="kw">datatable</span>(</span>
<span id="cb13-2"><a href="#cb13-2"></a>  Dat, </span>
<span id="cb13-3"><a href="#cb13-3"></a>  <span class="dt">callback =</span> callback, <span class="dt">rownames =</span> rowNames, <span class="dt">escape =</span> <span class="op">-</span>colIdx<span class="dv">-1</span>,</span>
<span id="cb13-4"><a href="#cb13-4"></a>  <span class="dt">extensions =</span> <span class="st">&quot;Buttons&quot;</span>, <span class="dt">elementId =</span> <span class="st">&quot;mytable&quot;</span>,</span>
<span id="cb13-5"><a href="#cb13-5"></a>  <span class="dt">options =</span> <span class="kw">list</span>(</span>
<span id="cb13-6"><a href="#cb13-6"></a>    <span class="dt">paging =</span> <span class="ot">FALSE</span>,</span>
<span id="cb13-7"><a href="#cb13-7"></a>    <span class="dt">searching =</span> <span class="ot">FALSE</span>,</span>
<span id="cb13-8"><a href="#cb13-8"></a>    <span class="dt">dom =</span> <span class="st">&quot;Bfrtip&quot;</span>,</span>
<span id="cb13-9"><a href="#cb13-9"></a>    <span class="dt">columnDefs =</span> <span class="kw">list</span>(</span>
<span id="cb13-10"><a href="#cb13-10"></a>      <span class="kw">list</span>(</span>
<span id="cb13-11"><a href="#cb13-11"></a>        <span class="dt">visible =</span> <span class="ot">FALSE</span>, </span>
<span id="cb13-12"><a href="#cb13-12"></a>        <span class="dt">targets =</span> <span class="kw">ncol</span>(Dat)<span class="op">-</span><span class="dv">1</span><span class="op">+</span>colIdx</span>
<span id="cb13-13"><a href="#cb13-13"></a>      ),</span>
<span id="cb13-14"><a href="#cb13-14"></a>      <span class="kw">list</span>(</span>
<span id="cb13-15"><a href="#cb13-15"></a>        <span class="dt">orderable =</span> <span class="ot">FALSE</span>, </span>
<span id="cb13-16"><a href="#cb13-16"></a>        <span class="dt">className =</span> <span class="st">&quot;details-control&quot;</span>, </span>
<span id="cb13-17"><a href="#cb13-17"></a>        <span class="dt">targets =</span> colIdx</span>
<span id="cb13-18"><a href="#cb13-18"></a>      ),</span>
<span id="cb13-19"><a href="#cb13-19"></a>      <span class="kw">list</span>(</span>
<span id="cb13-20"><a href="#cb13-20"></a>        <span class="dt">className =</span> <span class="st">&quot;dt-center&quot;</span>, </span>
<span id="cb13-21"><a href="#cb13-21"></a>        <span class="dt">targets =</span> <span class="st">&quot;_all&quot;</span></span>
<span id="cb13-22"><a href="#cb13-22"></a>      )</span>
<span id="cb13-23"><a href="#cb13-23"></a>    ),</span>
<span id="cb13-24"><a href="#cb13-24"></a>    <span class="dt">buttons =</span> <span class="kw">list</span>(</span>
<span id="cb13-25"><a href="#cb13-25"></a>      <span class="kw">list</span>(</span>
<span id="cb13-26"><a href="#cb13-26"></a>        <span class="dt">extend =</span> <span class="st">&quot;excel&quot;</span>,</span>
<span id="cb13-27"><a href="#cb13-27"></a>        <span class="dt">exportOptions =</span> <span class="kw">list</span>(</span>
<span id="cb13-28"><a href="#cb13-28"></a>          <span class="dt">orthogonal =</span> <span class="st">&quot;export&quot;</span>, </span>
<span id="cb13-29"><a href="#cb13-29"></a>          <span class="dt">columns =</span> <span class="dv">0</span><span class="op">:</span>(<span class="kw">ncol</span>(Dat)<span class="op">-</span><span class="dv">2</span>)</span>
<span id="cb13-30"><a href="#cb13-30"></a>        ),</span>
<span id="cb13-31"><a href="#cb13-31"></a>        <span class="dt">title =</span> excelTitle,</span>
<span id="cb13-32"><a href="#cb13-32"></a>        <span class="dt">orientation =</span> <span class="st">&quot;landscape&quot;</span>,</span>
<span id="cb13-33"><a href="#cb13-33"></a>        <span class="dt">customize =</span> js_customXLSX</span>
<span id="cb13-34"><a href="#cb13-34"></a>      )</span>
<span id="cb13-35"><a href="#cb13-35"></a>    )</span>
<span id="cb13-36"><a href="#cb13-36"></a>  )</span>
<span id="cb13-37"><a href="#cb13-37"></a>)</span></code></pre></div>
<p>Here is the Excel file one gets:</p>
<p><img src="figures/DTchildRows3.png" /></p>

        </div>


        <div id="footer">
          Site proudly generated by
          <a href="http://jaspervdj.be/hakyll">Hakyll</a>
        </div>

      </div>

    </div>

    <div class="row">
      <div class="col-sm-12">
        <div id="disqus_thread"></div>
        <div class="pagination">
          <ul>
            <li>
              <a href="http://laustep.github.io/stlahblog/">« Back Home</a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    
  </div>

</body>

<script src="../libraries/bootstrap/bootstrap.min.js"></script>
<script>
  var disqus_developer = 1;
  var disqus_shortname = 'stlapblog';
  // required: replace example with your forum shortname
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function () {
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] ||
      document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the
  <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a>
</noscript>
<!-- MathJax: Fall back to local if CDN offline but local image fonts are not supported (saves >100MB) -->
<script type="text/x-mathjax-config" src="../libraries/mathjax/config/TeX-MML-AM_CHTML.js"></script>
<!-- <script>
  window.MathJax || document.write('<script type="text/x-mathjax-config">MathJax.Hub.Config({"HTML-CSS":{imageFont:null}});<\/script><script src="../libraries/mathjax/MathJax.js"><\/script>');
</script> -->


</html>
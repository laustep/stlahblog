<!DOCTYPE HTML>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Saturn Elephant - Useful callbacks for DT (in Shiny)</title>
  <link href="../libraries/bootstrap/bootstrap-grid.min.css" rel="stylesheet">
  <link rel="stylesheet" href="../css/post.css" />
  <link rel="stylesheet" href="../css/misc.css" /> 
  
    <link rel="stylesheet" href="../css/pandoc-solarized.css" /> 
   
  
    <link href="../libraries/highlighters/prettify/css/minimal.css" rel="stylesheet"> 
  
  <link href="https://fonts.googleapis.com/css?family=Raleway:400,600,200,800" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Droid+Sans" rel="stylesheet" type="text/css">
  <script src="../libraries/jquery.min.js"></script>
  <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>
</head>

<body>
  <div class="container-fluid">
    <div class="row">
      <!-- Sidebar. -->
      <div class="sidebar col-sm-3">
        <div style="float:right;clear:both;margin-right:50px;margin-top:150px;">
          <a href="https://www.r-bloggers.com/">
            <img src="https://www.r-bloggers.com/wp-content/uploads/2016/04/R_02_2016-05-01.png" alt="stla" width="100%" />
          </a>
          <br />
          <a href="http://t-redactyl.io/">
            <span style="color:black;font-weight:bold;font-family:sans-serif;font-size:29px;">Standard error</span>
          </a>
          <a href="http://timelyportfolio.blogspot.be/">
            <span style="color:grey;font-weight:bold;font-family:sans-serif;font-size:27px;">Timely portfolio</span>
          </a>
          <br />
          <a href="https://antoineguillot.wordpress.com/blog/">
            <span style="color:white;background-color:darkblue;font-weight:bold;font-family:sans-serif;font-size:25px;border:5px solid;border-color:darkblue">ENHANCE DATA</span>
          </a>
          <br />
          <a href="https://fronkonstin.com/">
            <span style="color:black;background-color:gold;font-weight:bold;font-size:32px;border:3px solid;border-color:gold;">Fronkonstin</span>
          </a>
        </div>
      </div>

      <div class="main col-sm-9">
        <div id="header">
          <div id="logo" style="position:absolute;">
            <a href="../">
              <img src="../images/stla.jpg" alt="stla" width="100px" />
            </a>
          </div>
          <div id="navigation" style="margin-top:50px;">
            <a href="../">Home</a>
            <a href="../about.html">About</a>
            <a href="../contact.html">Contact</a>
            <a href="../archive.html">Archive</a>
          </div>
        </div>

        <div class="content">
          <h1>Useful callbacks for DT (in Shiny)</h1> 
          <div class="info">
    Posted on June 14, 2019
    
        by Stéphane Laurent
    
</div>
<div class="info">
    
    Tags: <a href="../tags/R.html">R</a>, <a href="../tags/shiny.html">shiny</a>, <a href="../tags/javascript.html">javascript</a>, <a href="../tags/datatables.html">datatables</a>
    
</div>

<ul>
<li><a href="#edit-cells-on-pressing-tab-and-arrow-keys">Edit cells on pressing Tab and arrow keys</a></li>
<li><a href="#select-rows-on-click-and-drag">Select rows on click and drag</a>
<ul>
<li><a href="#getting-the-selected-rows">Getting the selected rows</a></li>
</ul></li>
<li><a href="#edit-columns-headers">Edit columns headers</a></li>
<li><a href="#child-tables">Child tables</a></li>
<li><a href="#change-row-css-properties-on-clicking-an-icon">Change row CSS properties on clicking an icon</a></li>
<li><a href="#capturing-the-autofilled-cells">Capturing the autofilled cells</a></li>
<li><a href="#select-page-with-a-numeric-input">Select page with a numeric input</a></li>
</ul>
<h1 id="edit-cells-on-pressing-tab-and-arrow-keys">Edit cells on pressing Tab and arrow keys</h1>
<p>This callback allows a more friendly way to edit the cells:</p>
<ul>
<li><p>navigate in the table, press ‘Enter’ to edit;</p></li>
<li><p>press ‘Enter’ to validate the edit and stay at the same position;</p></li>
<li><p>if you are editing a cell, then pressing ‘Tab’ or an arrow key will trigger the edit of the new cell.</p></li>
</ul>
<p>This is done with the help of the <code>KeyTable</code> extension.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw">library</span>(shiny)</a>
<a class="sourceLine" id="cb1-2" title="2"><span class="kw">library</span>(DT)</a>
<a class="sourceLine" id="cb1-3" title="3"></a>
<a class="sourceLine" id="cb1-4" title="4">js &lt;-<span class="st"> </span><span class="kw">c</span>(</a>
<a class="sourceLine" id="cb1-5" title="5">  <span class="st">&quot;table.on('key', function(e, datatable, key, cell, originalEvent){&quot;</span>,</a>
<a class="sourceLine" id="cb1-6" title="6">  <span class="st">&quot;  var targetName = originalEvent.target.localName;&quot;</span>,</a>
<a class="sourceLine" id="cb1-7" title="7">  <span class="st">&quot;  if(key == 13 &amp;&amp; targetName == 'body'){&quot;</span>,</a>
<a class="sourceLine" id="cb1-8" title="8">  <span class="st">&quot;    $(cell.node()).trigger('dblclick.dt');&quot;</span>,</a>
<a class="sourceLine" id="cb1-9" title="9">  <span class="st">&quot;  }&quot;</span>,</a>
<a class="sourceLine" id="cb1-10" title="10">  <span class="st">&quot;});&quot;</span>,</a>
<a class="sourceLine" id="cb1-11" title="11">  <span class="st">&quot;table.on('keydown', function(e){&quot;</span>,</a>
<a class="sourceLine" id="cb1-12" title="12">  <span class="st">&quot;  var keys = [9,13,37,38,39,40];&quot;</span>,</a>
<a class="sourceLine" id="cb1-13" title="13">  <span class="st">&quot;  if(e.target.localName == 'input' &amp;&amp; keys.indexOf(e.keyCode) &gt; -1){&quot;</span>,</a>
<a class="sourceLine" id="cb1-14" title="14">  <span class="st">&quot;    $(e.target).trigger('blur');&quot;</span>,</a>
<a class="sourceLine" id="cb1-15" title="15">  <span class="st">&quot;  }&quot;</span>,</a>
<a class="sourceLine" id="cb1-16" title="16">  <span class="st">&quot;});&quot;</span>,</a>
<a class="sourceLine" id="cb1-17" title="17">  <span class="st">&quot;table.on('key-focus', function(e, datatable, cell, originalEvent){&quot;</span>,</a>
<a class="sourceLine" id="cb1-18" title="18">  <span class="st">&quot;  var targetName = originalEvent.target.localName;&quot;</span>,</a>
<a class="sourceLine" id="cb1-19" title="19">  <span class="st">&quot;  var type = originalEvent.type;&quot;</span>,</a>
<a class="sourceLine" id="cb1-20" title="20">  <span class="st">&quot;  if(type == 'keydown' &amp;&amp; targetName == 'input'){&quot;</span>,</a>
<a class="sourceLine" id="cb1-21" title="21">  <span class="st">&quot;    if([9,37,38,39,40].indexOf(originalEvent.keyCode) &gt; -1){&quot;</span>,</a>
<a class="sourceLine" id="cb1-22" title="22">  <span class="st">&quot;      $(cell.node()).trigger('dblclick.dt');&quot;</span>,</a>
<a class="sourceLine" id="cb1-23" title="23">  <span class="st">&quot;    }&quot;</span>,</a>
<a class="sourceLine" id="cb1-24" title="24">  <span class="st">&quot;  }&quot;</span>,</a>
<a class="sourceLine" id="cb1-25" title="25">  <span class="st">&quot;});&quot;</span></a>
<a class="sourceLine" id="cb1-26" title="26">)</a>
<a class="sourceLine" id="cb1-27" title="27"></a>
<a class="sourceLine" id="cb1-28" title="28">ui &lt;-<span class="st"> </span><span class="kw">fluidPage</span>(</a>
<a class="sourceLine" id="cb1-29" title="29">  <span class="kw">DTOutput</span>(<span class="st">&quot;table&quot;</span>)</a>
<a class="sourceLine" id="cb1-30" title="30">)</a>
<a class="sourceLine" id="cb1-31" title="31"></a>
<a class="sourceLine" id="cb1-32" title="32">server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output, session){</a>
<a class="sourceLine" id="cb1-33" title="33">  output[[<span class="st">&quot;table&quot;</span>]] &lt;-<span class="st"> </span><span class="kw">renderDT</span>({</a>
<a class="sourceLine" id="cb1-34" title="34">    <span class="kw">datatable</span>(</a>
<a class="sourceLine" id="cb1-35" title="35">      iris,</a>
<a class="sourceLine" id="cb1-36" title="36">      <span class="dt">selection =</span> <span class="st">&quot;none&quot;</span>,</a>
<a class="sourceLine" id="cb1-37" title="37">      <span class="dt">editable =</span> <span class="ot">TRUE</span>, </a>
<a class="sourceLine" id="cb1-38" title="38">      <span class="dt">callback =</span> <span class="kw">JS</span>(js),</a>
<a class="sourceLine" id="cb1-39" title="39">      <span class="dt">extensions =</span> <span class="st">&quot;KeyTable&quot;</span>,</a>
<a class="sourceLine" id="cb1-40" title="40">      <span class="dt">options =</span> <span class="kw">list</span>(</a>
<a class="sourceLine" id="cb1-41" title="41">        <span class="dt">keys =</span> <span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb1-42" title="42">      )</a>
<a class="sourceLine" id="cb1-43" title="43">    )</a>
<a class="sourceLine" id="cb1-44" title="44">  })</a>
<a class="sourceLine" id="cb1-45" title="45">}</a>
<a class="sourceLine" id="cb1-46" title="46"></a>
<a class="sourceLine" id="cb1-47" title="47"><span class="kw">shinyApp</span>(ui, server)</a></code></pre></div>
<p><img src="figures/DTcallback_editOnTab.gif" /></p>
<h1 id="select-rows-on-click-and-drag">Select rows on click and drag</h1>
<p>With this callback, which resorts to <code>jquery-ui</code>, you can select some rows on click and drag. You can also deselect all selected rows by double-clicking on the table.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1"><span class="kw">library</span>(shiny)</a>
<a class="sourceLine" id="cb2-2" title="2"><span class="kw">library</span>(DT)</a>
<a class="sourceLine" id="cb2-3" title="3"></a>
<a class="sourceLine" id="cb2-4" title="4">callback &lt;-<span class="st"> </span><span class="kw">c</span>(</a>
<a class="sourceLine" id="cb2-5" title="5">  <span class="st">&quot;var dt = table.table().node();&quot;</span>,</a>
<a class="sourceLine" id="cb2-6" title="6">  <span class="st">&quot;$(dt).selectable({&quot;</span>,</a>
<a class="sourceLine" id="cb2-7" title="7">  <span class="st">&quot;  distance : 10,&quot;</span>,</a>
<a class="sourceLine" id="cb2-8" title="8">  <span class="st">&quot;  selecting: function(evt, ui){&quot;</span>,</a>
<a class="sourceLine" id="cb2-9" title="9">  <span class="st">&quot;    $(this).find('tbody tr').each(function(i){&quot;</span>,</a>
<a class="sourceLine" id="cb2-10" title="10">  <span class="st">&quot;      if($(this).hasClass('ui-selecting')){&quot;</span>,</a>
<a class="sourceLine" id="cb2-11" title="11">  <span class="st">&quot;        table.row(i).select();&quot;</span>,</a>
<a class="sourceLine" id="cb2-12" title="12">  <span class="st">&quot;      }&quot;</span>,</a>
<a class="sourceLine" id="cb2-13" title="13">  <span class="st">&quot;    });&quot;</span>,</a>
<a class="sourceLine" id="cb2-14" title="14">  <span class="st">&quot;  }&quot;</span>,</a>
<a class="sourceLine" id="cb2-15" title="15">  <span class="st">&quot;}).on('dblclick', function(){table.rows().deselect();});&quot;</span></a>
<a class="sourceLine" id="cb2-16" title="16">)</a>
<a class="sourceLine" id="cb2-17" title="17"></a>
<a class="sourceLine" id="cb2-18" title="18">ui &lt;-<span class="st"> </span><span class="kw">fluidPage</span>(</a>
<a class="sourceLine" id="cb2-19" title="19">  <span class="kw">DTOutput</span>(<span class="st">&quot;dt&quot;</span>)</a>
<a class="sourceLine" id="cb2-20" title="20">)</a>
<a class="sourceLine" id="cb2-21" title="21"></a>
<a class="sourceLine" id="cb2-22" title="22">server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output){</a>
<a class="sourceLine" id="cb2-23" title="23">  output[[<span class="st">&quot;dt&quot;</span>]] &lt;-<span class="st"> </span><span class="kw">renderDT</span>({</a>
<a class="sourceLine" id="cb2-24" title="24">    dtable &lt;-<span class="st"> </span><span class="kw">datatable</span>(</a>
<a class="sourceLine" id="cb2-25" title="25">      iris, <span class="dt">extensions =</span> <span class="st">&quot;Select&quot;</span>, </a>
<a class="sourceLine" id="cb2-26" title="26">      <span class="dt">callback =</span> <span class="kw">JS</span>(callback), <span class="dt">selection =</span> <span class="st">&quot;multiple&quot;</span></a>
<a class="sourceLine" id="cb2-27" title="27">    )</a>
<a class="sourceLine" id="cb2-28" title="28">    dep &lt;-<span class="st"> </span>htmltools<span class="op">::</span><span class="kw">htmlDependency</span>(<span class="st">&quot;jqueryui&quot;</span>, <span class="st">&quot;1.12.1&quot;</span>,</a>
<a class="sourceLine" id="cb2-29" title="29">                                     <span class="st">&quot;www/shared/jqueryui&quot;</span>,</a>
<a class="sourceLine" id="cb2-30" title="30">                                     <span class="dt">script =</span> <span class="st">&quot;jquery-ui.min.js&quot;</span>,</a>
<a class="sourceLine" id="cb2-31" title="31">                                     <span class="dt">package =</span> <span class="st">&quot;shiny&quot;</span>)</a>
<a class="sourceLine" id="cb2-32" title="32">    dtable<span class="op">$</span>dependencies &lt;-<span class="st"> </span><span class="kw">c</span>(dtable<span class="op">$</span>dependencies, <span class="kw">list</span>(dep))</a>
<a class="sourceLine" id="cb2-33" title="33">    dtable</a>
<a class="sourceLine" id="cb2-34" title="34">  })</a>
<a class="sourceLine" id="cb2-35" title="35">}</a>
<a class="sourceLine" id="cb2-36" title="36"></a>
<a class="sourceLine" id="cb2-37" title="37"><span class="kw">shinyApp</span>(ui, server)</a></code></pre></div>
<p><img src="figures/DTcallback_selectOnDrag.gif" /></p>
<p>Unfortunately there is an issue: when you sort a column, the selected rows are lost. Below is another code which overcomes this issue; it uses a slightly different callback and the option <code>server = FALSE</code>.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1"><span class="kw">library</span>(shiny)</a>
<a class="sourceLine" id="cb3-2" title="2"><span class="kw">library</span>(DT)</a>
<a class="sourceLine" id="cb3-3" title="3"></a>
<a class="sourceLine" id="cb3-4" title="4">callback &lt;-<span class="st"> </span><span class="kw">c</span>(</a>
<a class="sourceLine" id="cb3-5" title="5">  <span class="st">&quot;var dt = table.table().node();&quot;</span>,</a>
<a class="sourceLine" id="cb3-6" title="6">  <span class="st">&quot;$(dt).selectable({&quot;</span>,</a>
<a class="sourceLine" id="cb3-7" title="7">  <span class="st">&quot;  distance : 10,&quot;</span>,</a>
<a class="sourceLine" id="cb3-8" title="8">  <span class="st">&quot;  selecting: function(evt, ui){&quot;</span>,</a>
<a class="sourceLine" id="cb3-9" title="9">  <span class="st">&quot;    $(this).find('tbody tr').each(function(i){&quot;</span>,</a>
<a class="sourceLine" id="cb3-10" title="10">  <span class="st">&quot;      if($(this).hasClass('ui-selecting')){&quot;</span>,</a>
<a class="sourceLine" id="cb3-11" title="11">  <span class="st">&quot;        table.row(':eq(' + i + ')').select();&quot;</span>,</a>
<a class="sourceLine" id="cb3-12" title="12">  <span class="st">&quot;      }&quot;</span>,</a>
<a class="sourceLine" id="cb3-13" title="13">  <span class="st">&quot;    });&quot;</span>,</a>
<a class="sourceLine" id="cb3-14" title="14">  <span class="st">&quot;  }&quot;</span>,</a>
<a class="sourceLine" id="cb3-15" title="15">  <span class="st">&quot;}).on('dblclick', function(){table.rows().deselect();});&quot;</span></a>
<a class="sourceLine" id="cb3-16" title="16">)</a>
<a class="sourceLine" id="cb3-17" title="17"></a>
<a class="sourceLine" id="cb3-18" title="18">ui &lt;-<span class="st"> </span><span class="kw">fluidPage</span>(</a>
<a class="sourceLine" id="cb3-19" title="19">  <span class="kw">DTOutput</span>(<span class="st">&quot;dt&quot;</span>)</a>
<a class="sourceLine" id="cb3-20" title="20">)</a>
<a class="sourceLine" id="cb3-21" title="21"></a>
<a class="sourceLine" id="cb3-22" title="22">server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output){</a>
<a class="sourceLine" id="cb3-23" title="23">  output[[<span class="st">&quot;dt&quot;</span>]] &lt;-<span class="st"> </span><span class="kw">renderDT</span>({</a>
<a class="sourceLine" id="cb3-24" title="24">    dtable &lt;-<span class="st"> </span><span class="kw">datatable</span>(</a>
<a class="sourceLine" id="cb3-25" title="25">      iris, <span class="dt">extensions =</span> <span class="st">&quot;Select&quot;</span>, </a>
<a class="sourceLine" id="cb3-26" title="26">      <span class="dt">callback =</span> <span class="kw">JS</span>(callback), <span class="dt">selection =</span> <span class="st">&quot;multiple&quot;</span></a>
<a class="sourceLine" id="cb3-27" title="27">    )</a>
<a class="sourceLine" id="cb3-28" title="28">    dep &lt;-<span class="st"> </span>htmltools<span class="op">::</span><span class="kw">htmlDependency</span>(<span class="st">&quot;jqueryui&quot;</span>, <span class="st">&quot;1.12.1&quot;</span>,</a>
<a class="sourceLine" id="cb3-29" title="29">                                     <span class="st">&quot;www/shared/jqueryui&quot;</span>,</a>
<a class="sourceLine" id="cb3-30" title="30">                                     <span class="dt">script =</span> <span class="st">&quot;jquery-ui.min.js&quot;</span>,</a>
<a class="sourceLine" id="cb3-31" title="31">                                     <span class="dt">package =</span> <span class="st">&quot;shiny&quot;</span>)</a>
<a class="sourceLine" id="cb3-32" title="32">    dtable<span class="op">$</span>dependencies &lt;-<span class="st"> </span><span class="kw">c</span>(dtable<span class="op">$</span>dependencies, <span class="kw">list</span>(dep))</a>
<a class="sourceLine" id="cb3-33" title="33">    dtable</a>
<a class="sourceLine" id="cb3-34" title="34">  }, <span class="dt">server =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb3-35" title="35">}</a>
<a class="sourceLine" id="cb3-36" title="36"></a>
<a class="sourceLine" id="cb3-37" title="37"><span class="kw">shinyApp</span>(ui, server)</a></code></pre></div>
<h3 id="getting-the-selected-rows">Getting the selected rows</h3>
<p>With the above code, <code>input[["dt_selected_rows"]]</code> provides only the rows selected by clicking, not the ones selected by dragging. Here is a code allowing to get both. The rows selected by clicking are given in <code>input[["dt_selected_rows"]]</code>, while the ones selected by dragging are given in <code>input[["dt_selected_rows2"]]</code>. There are some duplicates so we have to use <code>unique</code>.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1"><span class="kw">library</span>(shiny)</a>
<a class="sourceLine" id="cb4-2" title="2"><span class="kw">library</span>(DT)</a>
<a class="sourceLine" id="cb4-3" title="3"></a>
<a class="sourceLine" id="cb4-4" title="4">callback &lt;-<span class="st"> </span><span class="kw">c</span>(</a>
<a class="sourceLine" id="cb4-5" title="5">  <span class="st">&quot;function distinct(value, index, self){ </span></a>
<a class="sourceLine" id="cb4-6" title="6"><span class="st">    return self.indexOf(value) === index;</span></a>
<a class="sourceLine" id="cb4-7" title="7"><span class="st">  }&quot;</span>,</a>
<a class="sourceLine" id="cb4-8" title="8">  <span class="st">&quot;var dt = table.table().node();&quot;</span>,</a>
<a class="sourceLine" id="cb4-9" title="9">  <span class="st">&quot;var tblID = $(dt).closest('.datatables').attr('id');&quot;</span>,</a>
<a class="sourceLine" id="cb4-10" title="10">  <span class="st">&quot;var inputName = tblID + '_rows_selected2'&quot;</span>,</a>
<a class="sourceLine" id="cb4-11" title="11">  <span class="st">&quot;var selected = [];&quot;</span>,</a>
<a class="sourceLine" id="cb4-12" title="12">  <span class="st">&quot;$(dt).selectable({&quot;</span>,</a>
<a class="sourceLine" id="cb4-13" title="13">  <span class="st">&quot;  distance : 10,&quot;</span>,</a>
<a class="sourceLine" id="cb4-14" title="14">  <span class="st">&quot;  selecting: function(evt, ui){&quot;</span>,</a>
<a class="sourceLine" id="cb4-15" title="15">  <span class="st">&quot;    $(this).find('tbody tr').each(function(i){&quot;</span>,</a>
<a class="sourceLine" id="cb4-16" title="16">  <span class="st">&quot;      if($(this).hasClass('ui-selecting')){&quot;</span>,</a>
<a class="sourceLine" id="cb4-17" title="17">  <span class="st">&quot;        var row = table.row(':eq(' + i + ')')&quot;</span>,</a>
<a class="sourceLine" id="cb4-18" title="18">  <span class="st">&quot;        row.select();&quot;</span>,</a>
<a class="sourceLine" id="cb4-19" title="19">  <span class="st">&quot;        var rowIndex = parseInt(row.id().split('-')[1]);&quot;</span>,</a>
<a class="sourceLine" id="cb4-20" title="20">  <span class="st">&quot;        selected.push(rowIndex);&quot;</span>,</a>
<a class="sourceLine" id="cb4-21" title="21">  <span class="st">&quot;        selected = selected.filter(distinct);&quot;</span>,</a>
<a class="sourceLine" id="cb4-22" title="22">  <span class="st">&quot;        Shiny.setInputValue(inputName, selected);&quot;</span>,</a>
<a class="sourceLine" id="cb4-23" title="23">  <span class="st">&quot;      }&quot;</span>,</a>
<a class="sourceLine" id="cb4-24" title="24">  <span class="st">&quot;    });&quot;</span>,</a>
<a class="sourceLine" id="cb4-25" title="25">  <span class="st">&quot;  }&quot;</span>,</a>
<a class="sourceLine" id="cb4-26" title="26">  <span class="st">&quot;}).on('dblclick', function(){table.rows().deselect();});&quot;</span>,</a>
<a class="sourceLine" id="cb4-27" title="27">  <span class="st">&quot;table.on('click', 'tr', function(){&quot;</span>,</a>
<a class="sourceLine" id="cb4-28" title="28">  <span class="st">&quot;  var row = table.row(this);&quot;</span>,</a>
<a class="sourceLine" id="cb4-29" title="29">  <span class="st">&quot;  if(!$(this).hasClass('selected')){&quot;</span>,</a>
<a class="sourceLine" id="cb4-30" title="30">  <span class="st">&quot;    var rowIndex = parseInt(row.id().split('-')[1]);&quot;</span>,</a>
<a class="sourceLine" id="cb4-31" title="31">  <span class="st">&quot;    var index = selected.indexOf(rowIndex);&quot;</span>,</a>
<a class="sourceLine" id="cb4-32" title="32">  <span class="st">&quot;    if(index &gt; -1){&quot;</span>,</a>
<a class="sourceLine" id="cb4-33" title="33">  <span class="st">&quot;       selected.splice(index, 1);&quot;</span>,</a>
<a class="sourceLine" id="cb4-34" title="34">  <span class="st">&quot;    }&quot;</span>,</a>
<a class="sourceLine" id="cb4-35" title="35">  <span class="st">&quot;  }&quot;</span>,</a>
<a class="sourceLine" id="cb4-36" title="36">  <span class="st">&quot;  Shiny.setInputValue(inputName, selected);&quot;</span>,</a>
<a class="sourceLine" id="cb4-37" title="37">  <span class="st">&quot;});&quot;</span></a>
<a class="sourceLine" id="cb4-38" title="38">)</a>
<a class="sourceLine" id="cb4-39" title="39"></a>
<a class="sourceLine" id="cb4-40" title="40">ui &lt;-<span class="st"> </span><span class="kw">fluidPage</span>(</a>
<a class="sourceLine" id="cb4-41" title="41">  <span class="kw">DTOutput</span>(<span class="st">&quot;dt&quot;</span>),</a>
<a class="sourceLine" id="cb4-42" title="42">  <span class="kw">br</span>(),</a>
<a class="sourceLine" id="cb4-43" title="43">  <span class="kw">verbatimTextOutput</span>(<span class="st">&quot;selectedRows&quot;</span>)</a>
<a class="sourceLine" id="cb4-44" title="44">)</a>
<a class="sourceLine" id="cb4-45" title="45"></a>
<a class="sourceLine" id="cb4-46" title="46">dat &lt;-<span class="st"> </span>iris</a>
<a class="sourceLine" id="cb4-47" title="47">dat<span class="op">$</span>ROWID &lt;-<span class="st"> </span><span class="kw">paste0</span>(<span class="st">&quot;row-&quot;</span>, <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(dat))</a>
<a class="sourceLine" id="cb4-48" title="48"></a>
<a class="sourceLine" id="cb4-49" title="49">rowNames &lt;-<span class="st"> </span><span class="ot">TRUE</span> <span class="co"># whether to show row names in the table</span></a>
<a class="sourceLine" id="cb4-50" title="50">colIndex &lt;-<span class="st"> </span><span class="kw">as.integer</span>(rowNames)</a>
<a class="sourceLine" id="cb4-51" title="51"></a>
<a class="sourceLine" id="cb4-52" title="52">server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output){</a>
<a class="sourceLine" id="cb4-53" title="53">  output[[<span class="st">&quot;dt&quot;</span>]] &lt;-<span class="st"> </span><span class="kw">renderDT</span>({</a>
<a class="sourceLine" id="cb4-54" title="54">    dtable &lt;-<span class="st"> </span><span class="kw">datatable</span>(</a>
<a class="sourceLine" id="cb4-55" title="55">      dat, <span class="dt">rownames =</span> rowNames,  </a>
<a class="sourceLine" id="cb4-56" title="56">      <span class="dt">extensions =</span> <span class="st">&quot;Select&quot;</span>, </a>
<a class="sourceLine" id="cb4-57" title="57">      <span class="dt">callback =</span> <span class="kw">JS</span>(callback),</a>
<a class="sourceLine" id="cb4-58" title="58">      <span class="dt">selection =</span> <span class="st">&quot;multiple&quot;</span>, </a>
<a class="sourceLine" id="cb4-59" title="59">      <span class="dt">options =</span> <span class="kw">list</span>(</a>
<a class="sourceLine" id="cb4-60" title="60">        <span class="dt">rowId =</span> <span class="kw">JS</span>(<span class="kw">sprintf</span>(<span class="st">&quot;function(data){return data[%d];}&quot;</span>, </a>
<a class="sourceLine" id="cb4-61" title="61">                           <span class="kw">ncol</span>(dat)<span class="op">-</span>1L<span class="op">+</span>colIndex)),</a>
<a class="sourceLine" id="cb4-62" title="62">        <span class="dt">columnDefs =</span> <span class="kw">list</span>( <span class="co"># hide the ROWID column</span></a>
<a class="sourceLine" id="cb4-63" title="63">          <span class="kw">list</span>(<span class="dt">visible =</span> <span class="ot">FALSE</span>, <span class="dt">targets =</span> <span class="kw">ncol</span>(dat)<span class="op">-</span>1L<span class="op">+</span>colIndex)</a>
<a class="sourceLine" id="cb4-64" title="64">        )</a>
<a class="sourceLine" id="cb4-65" title="65">      )</a>
<a class="sourceLine" id="cb4-66" title="66">    )</a>
<a class="sourceLine" id="cb4-67" title="67">    dep &lt;-<span class="st"> </span>htmltools<span class="op">::</span><span class="kw">htmlDependency</span>(<span class="st">&quot;jqueryui&quot;</span>, <span class="st">&quot;1.12.1&quot;</span>,</a>
<a class="sourceLine" id="cb4-68" title="68">                                     <span class="st">&quot;www/shared/jqueryui&quot;</span>,</a>
<a class="sourceLine" id="cb4-69" title="69">                                     <span class="dt">script =</span> <span class="st">&quot;jquery-ui.min.js&quot;</span>,</a>
<a class="sourceLine" id="cb4-70" title="70">                                     <span class="dt">package =</span> <span class="st">&quot;shiny&quot;</span>)</a>
<a class="sourceLine" id="cb4-71" title="71">    dtable<span class="op">$</span>dependencies &lt;-<span class="st"> </span><span class="kw">c</span>(dtable<span class="op">$</span>dependencies, <span class="kw">list</span>(dep))</a>
<a class="sourceLine" id="cb4-72" title="72">    dtable</a>
<a class="sourceLine" id="cb4-73" title="73">  }, <span class="dt">server =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb4-74" title="74">  </a>
<a class="sourceLine" id="cb4-75" title="75">  selectedRows &lt;-<span class="st"> </span><span class="kw">reactive</span>({</a>
<a class="sourceLine" id="cb4-76" title="76">    <span class="kw">unique</span>(</a>
<a class="sourceLine" id="cb4-77" title="77">      <span class="kw">c</span>(input[[<span class="st">&quot;dt_rows_selected&quot;</span>]], input[[<span class="st">&quot;dt_rows_selected2&quot;</span>]])</a>
<a class="sourceLine" id="cb4-78" title="78">    )</a>
<a class="sourceLine" id="cb4-79" title="79">  })</a>
<a class="sourceLine" id="cb4-80" title="80">  </a>
<a class="sourceLine" id="cb4-81" title="81">  output[[<span class="st">&quot;selectedRows&quot;</span>]] &lt;-<span class="st"> </span><span class="kw">renderText</span>({</a>
<a class="sourceLine" id="cb4-82" title="82">    <span class="kw">selectedRows</span>()</a>
<a class="sourceLine" id="cb4-83" title="83">  })</a>
<a class="sourceLine" id="cb4-84" title="84">}</a>
<a class="sourceLine" id="cb4-85" title="85"></a>
<a class="sourceLine" id="cb4-86" title="86"><span class="kw">shinyApp</span>(ui, server)</a></code></pre></div>
<h1 id="edit-columns-headers">Edit columns headers</h1>
<p>This callback uses the <code>jQuery contextMenu</code> library. It allows to edit a column header by right-clicking on it. When done, press ‘Escape’ or move the mouse.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1"><span class="kw">library</span>(shiny)</a>
<a class="sourceLine" id="cb5-2" title="2"><span class="kw">library</span>(DT)</a>
<a class="sourceLine" id="cb5-3" title="3"></a>
<a class="sourceLine" id="cb5-4" title="4">callback &lt;-<span class="st"> </span><span class="kw">c</span>(</a>
<a class="sourceLine" id="cb5-5" title="5">  <span class="st">&quot;$.contextMenu({&quot;</span>,</a>
<a class="sourceLine" id="cb5-6" title="6">  <span class="st">&quot;  selector: '#table th',&quot;</span>, </a>
<a class="sourceLine" id="cb5-7" title="7">  <span class="st">&quot;  trigger: 'right',&quot;</span>,</a>
<a class="sourceLine" id="cb5-8" title="8">  <span class="st">&quot;  autoHide: true,&quot;</span>,</a>
<a class="sourceLine" id="cb5-9" title="9">  <span class="st">&quot;  items: {&quot;</span>,</a>
<a class="sourceLine" id="cb5-10" title="10">  <span class="st">&quot;    text: {&quot;</span>,</a>
<a class="sourceLine" id="cb5-11" title="11">  <span class="st">&quot;      name: 'Enter column header:',&quot;</span>, </a>
<a class="sourceLine" id="cb5-12" title="12">  <span class="st">&quot;      type: 'text',&quot;</span>, </a>
<a class="sourceLine" id="cb5-13" title="13">  <span class="st">&quot;      value: ''&quot;</span>, </a>
<a class="sourceLine" id="cb5-14" title="14">  <span class="st">&quot;    }&quot;</span>,</a>
<a class="sourceLine" id="cb5-15" title="15">  <span class="st">&quot;  },&quot;</span>,</a>
<a class="sourceLine" id="cb5-16" title="16">  <span class="st">&quot;  events: {&quot;</span>,</a>
<a class="sourceLine" id="cb5-17" title="17">  <span class="st">&quot;    show: function(opts){&quot;</span>,</a>
<a class="sourceLine" id="cb5-18" title="18">  <span class="st">&quot;      $.contextMenu.setInputValues(opts, {text: opts.$trigger.text()});&quot;</span>,</a>
<a class="sourceLine" id="cb5-19" title="19">  <span class="st">&quot;    },&quot;</span>,</a>
<a class="sourceLine" id="cb5-20" title="20">  <span class="st">&quot;    hide: function(opts){&quot;</span>,</a>
<a class="sourceLine" id="cb5-21" title="21">  <span class="st">&quot;      var $this = this;&quot;</span>,</a>
<a class="sourceLine" id="cb5-22" title="22">  <span class="st">&quot;      var data = $.contextMenu.getInputValues(opts, $this.data());&quot;</span>,</a>
<a class="sourceLine" id="cb5-23" title="23">  <span class="st">&quot;      var $th = opts.$trigger;&quot;</span>,</a>
<a class="sourceLine" id="cb5-24" title="24">  <span class="st">&quot;      $th.text(data.text);&quot;</span>,</a>
<a class="sourceLine" id="cb5-25" title="25">  <span class="st">&quot;    }&quot;</span>,</a>
<a class="sourceLine" id="cb5-26" title="26">  <span class="st">&quot;  }&quot;</span>,</a>
<a class="sourceLine" id="cb5-27" title="27">  <span class="st">&quot;});&quot;</span> </a>
<a class="sourceLine" id="cb5-28" title="28">)</a>
<a class="sourceLine" id="cb5-29" title="29"></a>
<a class="sourceLine" id="cb5-30" title="30">ui &lt;-<span class="st"> </span><span class="kw">fluidPage</span>(</a>
<a class="sourceLine" id="cb5-31" title="31">  tags<span class="op">$</span><span class="kw">head</span>(</a>
<a class="sourceLine" id="cb5-32" title="32">    tags<span class="op">$</span><span class="kw">link</span>(</a>
<a class="sourceLine" id="cb5-33" title="33">      <span class="dt">rel =</span> <span class="st">&quot;stylesheet&quot;</span>, </a>
<a class="sourceLine" id="cb5-34" title="34">      <span class="dt">href =</span> <span class="st">&quot;https://cdnjs.cloudflare.com/ajax/libs/jquery-contextmenu/2.8.0/jquery.contextMenu.min.css&quot;</span></a>
<a class="sourceLine" id="cb5-35" title="35">    ),</a>
<a class="sourceLine" id="cb5-36" title="36">    tags<span class="op">$</span><span class="kw">script</span>(</a>
<a class="sourceLine" id="cb5-37" title="37">      <span class="dt">src =</span> <span class="st">&quot;https://cdnjs.cloudflare.com/ajax/libs/jquery-contextmenu/2.8.0/jquery.contextMenu.min.js&quot;</span></a>
<a class="sourceLine" id="cb5-38" title="38">    )</a>
<a class="sourceLine" id="cb5-39" title="39">  ),</a>
<a class="sourceLine" id="cb5-40" title="40">  <span class="kw">DTOutput</span>(<span class="st">&quot;table&quot;</span>)</a>
<a class="sourceLine" id="cb5-41" title="41">)</a>
<a class="sourceLine" id="cb5-42" title="42"></a>
<a class="sourceLine" id="cb5-43" title="43">server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output){</a>
<a class="sourceLine" id="cb5-44" title="44">  output[[<span class="st">&quot;table&quot;</span>]] &lt;-<span class="st"> </span><span class="kw">renderDT</span>({</a>
<a class="sourceLine" id="cb5-45" title="45">    <span class="kw">datatable</span>(iris, <span class="dt">callback =</span> <span class="kw">JS</span>(callback))</a>
<a class="sourceLine" id="cb5-46" title="46">  }, <span class="dt">server =</span> <span class="ot">FALSE</span>)  </a>
<a class="sourceLine" id="cb5-47" title="47">}</a>
<a class="sourceLine" id="cb5-48" title="48"></a>
<a class="sourceLine" id="cb5-49" title="49"><span class="kw">shinyApp</span>(ui, server)</a></code></pre></div>
<p><img src="figures/DTcallback_editHeaders.png" /></p>
<h1 id="child-tables">Child tables</h1>
<p>This callback allows to display child tables in the table. The indices of the selected rows of the child tables are sent to the Shiny server.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1"><span class="kw">library</span>(shiny)</a>
<a class="sourceLine" id="cb6-2" title="2"><span class="kw">library</span>(DT)</a>
<a class="sourceLine" id="cb6-3" title="3"><span class="kw">library</span>(jsonlite)</a>
<a class="sourceLine" id="cb6-4" title="4"></a>
<a class="sourceLine" id="cb6-5" title="5"><span class="co">## data ####</span></a>
<a class="sourceLine" id="cb6-6" title="6">dat &lt;-<span class="st"> </span><span class="kw">data.frame</span>(</a>
<a class="sourceLine" id="cb6-7" title="7">  <span class="dt">Sr =</span> <span class="kw">c</span>(<span class="fl">1.5</span>, <span class="fl">2.3</span>),</a>
<a class="sourceLine" id="cb6-8" title="8">  <span class="dt">Description =</span> <span class="kw">c</span>(<span class="st">&quot;A - B&quot;</span>, <span class="st">&quot;X - Y&quot;</span>)</a>
<a class="sourceLine" id="cb6-9" title="9">)</a>
<a class="sourceLine" id="cb6-10" title="10"><span class="co">## details of row 1</span></a>
<a class="sourceLine" id="cb6-11" title="11">subdat1 &lt;-<span class="st"> </span><span class="kw">data.frame</span>(</a>
<a class="sourceLine" id="cb6-12" title="12">  <span class="dt">Chromosome =</span> <span class="st">&quot;chr18&quot;</span>, </a>
<a class="sourceLine" id="cb6-13" title="13">  <span class="dt">SNP =</span> <span class="st">&quot;rs2&quot;</span>,</a>
<a class="sourceLine" id="cb6-14" title="14">  <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span></a>
<a class="sourceLine" id="cb6-15" title="15">)</a>
<a class="sourceLine" id="cb6-16" title="16"><span class="co">## details of row 2</span></a>
<a class="sourceLine" id="cb6-17" title="17">subdat2 &lt;-<span class="st"> </span><span class="kw">data.frame</span>(</a>
<a class="sourceLine" id="cb6-18" title="18">  <span class="dt">Chromosome =</span> <span class="kw">c</span>(<span class="st">&quot;chr19&quot;</span>,<span class="st">&quot;chr20&quot;</span>), </a>
<a class="sourceLine" id="cb6-19" title="19">  <span class="dt">SNP =</span> <span class="kw">c</span>(<span class="st">&quot;rs3&quot;</span>,<span class="st">&quot;rs4&quot;</span>), </a>
<a class="sourceLine" id="cb6-20" title="20">  <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span></a>
<a class="sourceLine" id="cb6-21" title="21">)</a>
<a class="sourceLine" id="cb6-22" title="22"><span class="co">## merge the row details</span></a>
<a class="sourceLine" id="cb6-23" title="23">subdats &lt;-<span class="st"> </span><span class="kw">lapply</span>(<span class="kw">list</span>(subdat1, subdat2), purrr<span class="op">::</span>transpose)</a>
<a class="sourceLine" id="cb6-24" title="24"><span class="co">## dataframe for the datatable</span></a>
<a class="sourceLine" id="cb6-25" title="25">Dat &lt;-<span class="st"> </span><span class="kw">cbind</span>(<span class="st">&quot; &quot;</span> =<span class="st"> &quot;expand&quot;</span>, dat, <span class="dt">details =</span> <span class="kw">I</span>(subdats))</a>
<a class="sourceLine" id="cb6-26" title="26"></a>
<a class="sourceLine" id="cb6-27" title="27"><span class="co">## the callback ####</span></a>
<a class="sourceLine" id="cb6-28" title="28"><span class="kw">registerInputHandler</span>(<span class="st">&quot;x.child&quot;</span>, <span class="cf">function</span>(x, ...) {</a>
<a class="sourceLine" id="cb6-29" title="29">  <span class="kw">fromJSON</span>(<span class="kw">toJSON</span>(x, <span class="dt">auto_unbox =</span> <span class="ot">TRUE</span>, <span class="dt">null =</span> <span class="st">&quot;null&quot;</span>), </a>
<a class="sourceLine" id="cb6-30" title="30">           <span class="dt">simplifyDataFrame =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb6-31" title="31">}, <span class="dt">force =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb6-32" title="32"></a>
<a class="sourceLine" id="cb6-33" title="33">callback =<span class="st"> </span><span class="kw">JS</span>(</a>
<a class="sourceLine" id="cb6-34" title="34">  <span class="st">&quot;var expandColumn = table.column(0).data()[0] === 'plus-sign' ? 0 : 1;&quot;</span>,</a>
<a class="sourceLine" id="cb6-35" title="35">  <span class="st">&quot;table.column(expandColumn).nodes().to$().css({cursor: 'pointer'});&quot;</span>,</a>
<a class="sourceLine" id="cb6-36" title="36">  <span class="st">&quot;&quot;</span>,</a>
<a class="sourceLine" id="cb6-37" title="37">  <span class="st">&quot;// send selected columns of the main table to Shiny&quot;</span>,</a>
<a class="sourceLine" id="cb6-38" title="38">  <span class="st">&quot;var tbl = table.table().node();&quot;</span>,</a>
<a class="sourceLine" id="cb6-39" title="39">  <span class="st">&quot;var tblId = $(tbl).closest('.datatables').attr('id');&quot;</span>,</a>
<a class="sourceLine" id="cb6-40" title="40">  <span class="st">&quot;var selector = 'td:not(:nth-child(' + (expandColumn+1) + '))';&quot;</span>,</a>
<a class="sourceLine" id="cb6-41" title="41">  <span class="st">&quot;table.on('click', selector, function(){&quot;</span>,</a>
<a class="sourceLine" id="cb6-42" title="42">  <span class="st">&quot;  setTimeout(function(){&quot;</span>,</a>
<a class="sourceLine" id="cb6-43" title="43">  <span class="st">&quot;    var indexes = table.rows({selected:true}).indexes();&quot;</span>,</a>
<a class="sourceLine" id="cb6-44" title="44">  <span class="st">&quot;    var indices = Array(indexes.length);&quot;</span>,</a>
<a class="sourceLine" id="cb6-45" title="45">  <span class="st">&quot;    for(var i = 0; i &lt; indices.length; ++i){&quot;</span>,</a>
<a class="sourceLine" id="cb6-46" title="46">  <span class="st">&quot;      indices[i] = indexes[i];&quot;</span>,</a>
<a class="sourceLine" id="cb6-47" title="47">  <span class="st">&quot;    }&quot;</span>,</a>
<a class="sourceLine" id="cb6-48" title="48">  <span class="st">&quot;    Shiny.setInputValue(tblId + '_rows_selected', indices);&quot;</span>,</a>
<a class="sourceLine" id="cb6-49" title="49">  <span class="st">&quot;  },0);&quot;</span>,</a>
<a class="sourceLine" id="cb6-50" title="50">  <span class="st">&quot;});&quot;</span>,</a>
<a class="sourceLine" id="cb6-51" title="51">  <span class="st">&quot;&quot;</span>,</a>
<a class="sourceLine" id="cb6-52" title="52">  <span class="st">&quot;// make the table header of the nested table&quot;</span>,</a>
<a class="sourceLine" id="cb6-53" title="53">  <span class="st">&quot;var format = function(d, childId){&quot;</span>,</a>
<a class="sourceLine" id="cb6-54" title="54">  <span class="st">&quot;  if(d != null){&quot;</span>,</a>
<a class="sourceLine" id="cb6-55" title="55">  <span class="st">&quot;    var html = '&lt;table class=</span><span class="ch">\&quot;</span><span class="st">compact hover</span><span class="ch">\&quot;</span><span class="st"> id=</span><span class="ch">\&quot;</span><span class="st">' + &quot;</span>, </a>
<a class="sourceLine" id="cb6-56" title="56">  <span class="st">&quot;                childId + '</span><span class="ch">\&quot;</span><span class="st">&gt;&lt;thead&gt;&lt;tr&gt;';&quot;</span>,</a>
<a class="sourceLine" id="cb6-57" title="57">  <span class="st">&quot;    for(var key in d[d.length-1][0]){&quot;</span>,</a>
<a class="sourceLine" id="cb6-58" title="58">  <span class="st">&quot;      html += '&lt;th&gt;' + key + '&lt;/th&gt;';&quot;</span>,</a>
<a class="sourceLine" id="cb6-59" title="59">  <span class="st">&quot;    }&quot;</span>,</a>
<a class="sourceLine" id="cb6-60" title="60">  <span class="st">&quot;    html += '&lt;/tr&gt;&lt;/thead&gt;&lt;/table&gt;'&quot;</span>,</a>
<a class="sourceLine" id="cb6-61" title="61">  <span class="st">&quot;    return html;&quot;</span>,</a>
<a class="sourceLine" id="cb6-62" title="62">  <span class="st">&quot;  } else {&quot;</span>,</a>
<a class="sourceLine" id="cb6-63" title="63">  <span class="st">&quot;    return '';&quot;</span>,</a>
<a class="sourceLine" id="cb6-64" title="64">  <span class="st">&quot;  }&quot;</span>,</a>
<a class="sourceLine" id="cb6-65" title="65">  <span class="st">&quot;};&quot;</span>,</a>
<a class="sourceLine" id="cb6-66" title="66">  <span class="st">&quot;&quot;</span>,</a>
<a class="sourceLine" id="cb6-67" title="67">  <span class="st">&quot;// row callback to style the rows background colors of the child tables&quot;</span>,</a>
<a class="sourceLine" id="cb6-68" title="68">  <span class="st">&quot;var rowCallback = function(row, dat, displayNum, index){&quot;</span>,</a>
<a class="sourceLine" id="cb6-69" title="69">  <span class="st">&quot;  if($(row).hasClass('odd')){&quot;</span>,</a>
<a class="sourceLine" id="cb6-70" title="70">  <span class="st">&quot;    $(row).css('background-color', 'papayawhip');&quot;</span>,</a>
<a class="sourceLine" id="cb6-71" title="71">  <span class="st">&quot;    $(row).hover(function(){&quot;</span>,</a>
<a class="sourceLine" id="cb6-72" title="72">  <span class="st">&quot;      $(this).css('background-color', '#E6FF99');&quot;</span>,</a>
<a class="sourceLine" id="cb6-73" title="73">  <span class="st">&quot;    }, function() {&quot;</span>,</a>
<a class="sourceLine" id="cb6-74" title="74">  <span class="st">&quot;      $(this).css('background-color', 'papayawhip');&quot;</span>,</a>
<a class="sourceLine" id="cb6-75" title="75">  <span class="st">&quot;    });&quot;</span>,</a>
<a class="sourceLine" id="cb6-76" title="76">  <span class="st">&quot;  } else {&quot;</span>,</a>
<a class="sourceLine" id="cb6-77" title="77">  <span class="st">&quot;    $(row).css('background-color', 'lemonchiffon');&quot;</span>,</a>
<a class="sourceLine" id="cb6-78" title="78">  <span class="st">&quot;    $(row).hover(function(){&quot;</span>,</a>
<a class="sourceLine" id="cb6-79" title="79">  <span class="st">&quot;      $(this).css('background-color', '#DDFF75');&quot;</span>,</a>
<a class="sourceLine" id="cb6-80" title="80">  <span class="st">&quot;    }, function() {&quot;</span>,</a>
<a class="sourceLine" id="cb6-81" title="81">  <span class="st">&quot;      $(this).css('background-color', 'lemonchiffon');&quot;</span>,</a>
<a class="sourceLine" id="cb6-82" title="82">  <span class="st">&quot;    });&quot;</span>,</a>
<a class="sourceLine" id="cb6-83" title="83">  <span class="st">&quot;  }&quot;</span>,</a>
<a class="sourceLine" id="cb6-84" title="84">  <span class="st">&quot;};&quot;</span>,</a>
<a class="sourceLine" id="cb6-85" title="85">  <span class="st">&quot;&quot;</span>,</a>
<a class="sourceLine" id="cb6-86" title="86">  <span class="st">&quot;// header callback to style the header of the child tables&quot;</span>,</a>
<a class="sourceLine" id="cb6-87" title="87">  <span class="st">&quot;var headerCallback = function(thead, data, start, end, display){&quot;</span>,</a>
<a class="sourceLine" id="cb6-88" title="88">  <span class="st">&quot;  $('th', thead).css({&quot;</span>,</a>
<a class="sourceLine" id="cb6-89" title="89">  <span class="st">&quot;    'border-top': '3px solid indigo',&quot;</span>, </a>
<a class="sourceLine" id="cb6-90" title="90">  <span class="st">&quot;    'color': 'indigo',&quot;</span>,</a>
<a class="sourceLine" id="cb6-91" title="91">  <span class="st">&quot;    'background-color': '#fadadd'&quot;</span>,</a>
<a class="sourceLine" id="cb6-92" title="92">  <span class="st">&quot;  });&quot;</span>,</a>
<a class="sourceLine" id="cb6-93" title="93">  <span class="st">&quot;};&quot;</span>,</a>
<a class="sourceLine" id="cb6-94" title="94">  <span class="st">&quot;&quot;</span>,</a>
<a class="sourceLine" id="cb6-95" title="95">  <span class="st">&quot;// make the child table&quot;</span>,</a>
<a class="sourceLine" id="cb6-96" title="96">  <span class="st">&quot;var format_datatable = function(d, childId){&quot;</span>,</a>
<a class="sourceLine" id="cb6-97" title="97">  <span class="st">&quot;  var dataset = [];&quot;</span>,</a>
<a class="sourceLine" id="cb6-98" title="98">  <span class="st">&quot;  var n = d.length - 1;&quot;</span>,</a>
<a class="sourceLine" id="cb6-99" title="99">  <span class="st">&quot;  for(var i = 0; i &lt; d[n].length; i++){&quot;</span>,</a>
<a class="sourceLine" id="cb6-100" title="100">  <span class="st">&quot;    var datarow = $.map(d[n][i], function(value, index){&quot;</span>,</a>
<a class="sourceLine" id="cb6-101" title="101">  <span class="st">&quot;      return [value];&quot;</span>,</a>
<a class="sourceLine" id="cb6-102" title="102">  <span class="st">&quot;    });&quot;</span>,</a>
<a class="sourceLine" id="cb6-103" title="103">  <span class="st">&quot;    dataset.push(datarow);&quot;</span>,</a>
<a class="sourceLine" id="cb6-104" title="104">  <span class="st">&quot;  }&quot;</span>,</a>
<a class="sourceLine" id="cb6-105" title="105">  <span class="st">&quot;  var id = 'table#' + childId;&quot;</span>,</a>
<a class="sourceLine" id="cb6-106" title="106">  <span class="st">&quot;  var subtable = $(id).DataTable({&quot;</span>,</a>
<a class="sourceLine" id="cb6-107" title="107">  <span class="st">&quot;             'data': dataset,&quot;</span>,</a>
<a class="sourceLine" id="cb6-108" title="108">  <span class="st">&quot;             'autoWidth': true,&quot;</span>,</a>
<a class="sourceLine" id="cb6-109" title="109">  <span class="st">&quot;             'deferRender': true,&quot;</span>,</a>
<a class="sourceLine" id="cb6-110" title="110">  <span class="st">&quot;             'info': false,&quot;</span>,</a>
<a class="sourceLine" id="cb6-111" title="111">  <span class="st">&quot;             'lengthChange': false,&quot;</span>,</a>
<a class="sourceLine" id="cb6-112" title="112">  <span class="st">&quot;             'ordering': d[n].length &gt; 1,&quot;</span>,</a>
<a class="sourceLine" id="cb6-113" title="113">  <span class="st">&quot;             'order': [],&quot;</span>,</a>
<a class="sourceLine" id="cb6-114" title="114">  <span class="st">&quot;             'paging': false,&quot;</span>,</a>
<a class="sourceLine" id="cb6-115" title="115">  <span class="st">&quot;             'scrollX': false,&quot;</span>,</a>
<a class="sourceLine" id="cb6-116" title="116">  <span class="st">&quot;             'scrollY': false,&quot;</span>,</a>
<a class="sourceLine" id="cb6-117" title="117">  <span class="st">&quot;             'searching': false,&quot;</span>,</a>
<a class="sourceLine" id="cb6-118" title="118">  <span class="st">&quot;             'sortClasses': false,&quot;</span>,</a>
<a class="sourceLine" id="cb6-119" title="119">  <span class="st">&quot;             'rowCallback': rowCallback,&quot;</span>,</a>
<a class="sourceLine" id="cb6-120" title="120">  <span class="st">&quot;             'headerCallback': headerCallback,&quot;</span>,</a>
<a class="sourceLine" id="cb6-121" title="121">  <span class="st">&quot;             'select': {style: 'multi'},&quot;</span>,</a>
<a class="sourceLine" id="cb6-122" title="122">  <span class="st">&quot;             'columnDefs': [{targets: '_all', className: 'dt-center'}]&quot;</span>,</a>
<a class="sourceLine" id="cb6-123" title="123">  <span class="st">&quot;           });&quot;</span>,</a>
<a class="sourceLine" id="cb6-124" title="124">  <span class="st">&quot;};&quot;</span>,</a>
<a class="sourceLine" id="cb6-125" title="125">  <span class="st">&quot;&quot;</span>,</a>
<a class="sourceLine" id="cb6-126" title="126">  <span class="st">&quot;// send selected rows of the children tables to shiny server&quot;</span>,</a>
<a class="sourceLine" id="cb6-127" title="127">  <span class="st">&quot;var nrows = table.rows().count();&quot;</span>,</a>
<a class="sourceLine" id="cb6-128" title="128">  <span class="st">&quot;var nullinfo = Array(nrows);&quot;</span>,</a>
<a class="sourceLine" id="cb6-129" title="129">  <span class="st">&quot;for(var i = 0; i &lt; nrows; ++i){&quot;</span>,</a>
<a class="sourceLine" id="cb6-130" title="130">  <span class="st">&quot;  nullinfo[i] = {row: i, selected: null};&quot;</span>,</a>
<a class="sourceLine" id="cb6-131" title="131">  <span class="st">&quot;}&quot;</span>,</a>
<a class="sourceLine" id="cb6-132" title="132">  <span class="st">&quot;Shiny.setInputValue(tblId + '_children:x.child', nullinfo);&quot;</span>,</a>
<a class="sourceLine" id="cb6-133" title="133">  <span class="st">&quot;var sendToR = function(){&quot;</span>,</a>
<a class="sourceLine" id="cb6-134" title="134">  <span class="st">&quot;  var info = [];&quot;</span>,</a>
<a class="sourceLine" id="cb6-135" title="135">  <span class="st">&quot;  setTimeout(function(){&quot;</span>,</a>
<a class="sourceLine" id="cb6-136" title="136">  <span class="st">&quot;    for(var i = 0; i &lt; nrows; ++i){&quot;</span>,</a>
<a class="sourceLine" id="cb6-137" title="137">  <span class="st">&quot;      var childId = 'child-' + i;&quot;</span>,</a>
<a class="sourceLine" id="cb6-138" title="138">  <span class="st">&quot;      var childtbl = $('#'+childId).DataTable();&quot;</span>,</a>
<a class="sourceLine" id="cb6-139" title="139">  <span class="st">&quot;      var indexes = childtbl.rows({selected:true}).indexes();&quot;</span>,</a>
<a class="sourceLine" id="cb6-140" title="140">  <span class="st">&quot;      var indices;&quot;</span>,</a>
<a class="sourceLine" id="cb6-141" title="141">  <span class="st">&quot;      if(indexes.length &gt; 0){&quot;</span>,</a>
<a class="sourceLine" id="cb6-142" title="142">  <span class="st">&quot;        indices = Array(indexes.length);&quot;</span>,</a>
<a class="sourceLine" id="cb6-143" title="143">  <span class="st">&quot;        for(var j = 0; j &lt; indices.length; ++j){&quot;</span>,</a>
<a class="sourceLine" id="cb6-144" title="144">  <span class="st">&quot;          indices[j] = indexes[j];&quot;</span>,</a>
<a class="sourceLine" id="cb6-145" title="145">  <span class="st">&quot;        }&quot;</span>,</a>
<a class="sourceLine" id="cb6-146" title="146">  <span class="st">&quot;      } else {&quot;</span>,</a>
<a class="sourceLine" id="cb6-147" title="147">  <span class="st">&quot;        indices = null;&quot;</span>,</a>
<a class="sourceLine" id="cb6-148" title="148">  <span class="st">&quot;      }&quot;</span>,</a>
<a class="sourceLine" id="cb6-149" title="149">  <span class="st">&quot;      info.push({row: i, selected: indices});&quot;</span>,</a>
<a class="sourceLine" id="cb6-150" title="150">  <span class="st">&quot;    }&quot;</span>,</a>
<a class="sourceLine" id="cb6-151" title="151">  <span class="st">&quot;    Shiny.setInputValue(tblId + '_children:x.child', info);&quot;</span>,</a>
<a class="sourceLine" id="cb6-152" title="152">  <span class="st">&quot;  }, 0);&quot;</span>,</a>
<a class="sourceLine" id="cb6-153" title="153">  <span class="st">&quot;}&quot;</span>,</a>
<a class="sourceLine" id="cb6-154" title="154">  <span class="st">&quot;$('body').on('click', '[id^=child-] td', sendToR);&quot;</span>,</a>
<a class="sourceLine" id="cb6-155" title="155">  <span class="st">&quot;&quot;</span>,</a>
<a class="sourceLine" id="cb6-156" title="156">  <span class="st">&quot;// click event to show/hide the child tables&quot;</span>,</a>
<a class="sourceLine" id="cb6-157" title="157">  <span class="st">&quot;table.on('click', 'td.details-control', function () {&quot;</span>,</a>
<a class="sourceLine" id="cb6-158" title="158">  <span class="st">&quot;  var cell = table.cell(this);&quot;</span>,</a>
<a class="sourceLine" id="cb6-159" title="159">  <span class="st">&quot;      row = table.row($(this).closest('tr'));&quot;</span>,</a>
<a class="sourceLine" id="cb6-160" title="160">  <span class="st">&quot;  if(row.child.isShown()){&quot;</span>,</a>
<a class="sourceLine" id="cb6-161" title="161">  <span class="st">&quot;    row.child.hide();&quot;</span>,</a>
<a class="sourceLine" id="cb6-162" title="162">  <span class="st">&quot;    cell.data('expand');&quot;</span>,</a>
<a class="sourceLine" id="cb6-163" title="163">  <span class="st">&quot;    sendToR();&quot;</span>,</a>
<a class="sourceLine" id="cb6-164" title="164">  <span class="st">&quot;  } else {&quot;</span>,</a>
<a class="sourceLine" id="cb6-165" title="165">  <span class="st">&quot;    var childId = 'child-' + row.index();&quot;</span>,</a>
<a class="sourceLine" id="cb6-166" title="166">  <span class="st">&quot;    row.child(format(row.data(), childId)).show();&quot;</span>,</a>
<a class="sourceLine" id="cb6-167" title="167">  <span class="st">&quot;    row.child.show();&quot;</span>,</a>
<a class="sourceLine" id="cb6-168" title="168">  <span class="st">&quot;    cell.data('collapse-down');&quot;</span>,</a>
<a class="sourceLine" id="cb6-169" title="169">  <span class="st">&quot;    format_datatable(row.data(), childId);&quot;</span>,</a>
<a class="sourceLine" id="cb6-170" title="170">  <span class="st">&quot;  }&quot;</span>,</a>
<a class="sourceLine" id="cb6-171" title="171">  <span class="st">&quot;});&quot;</span>)</a>
<a class="sourceLine" id="cb6-172" title="172"></a>
<a class="sourceLine" id="cb6-173" title="173"><span class="co">## render function, to display the glyphicons ####</span></a>
<a class="sourceLine" id="cb6-174" title="174">render &lt;-<span class="st"> </span><span class="kw">c</span>(</a>
<a class="sourceLine" id="cb6-175" title="175">  <span class="st">&quot;function(data, type, row, meta){&quot;</span>,</a>
<a class="sourceLine" id="cb6-176" title="176">  <span class="st">&quot;  if(type === 'display'){&quot;</span>,</a>
<a class="sourceLine" id="cb6-177" title="177">  <span class="st">&quot;    return '&lt;span style=</span><span class="ch">\\\&quot;</span><span class="st">color:black; font-size:18px</span><span class="ch">\\\&quot;</span><span class="st">&gt;' + &quot;</span>,</a>
<a class="sourceLine" id="cb6-178" title="178">  <span class="st">&quot;       '&lt;i class=</span><span class="ch">\\\&quot;</span><span class="st">glyphicon glyphicon-' + data + '</span><span class="ch">\\\&quot;</span><span class="st">&gt;&lt;/i&gt;&lt;/span&gt;';&quot;</span>,</a>
<a class="sourceLine" id="cb6-179" title="179">  <span class="st">&quot;  } else {&quot;</span>,</a>
<a class="sourceLine" id="cb6-180" title="180">  <span class="st">&quot;    return data;&quot;</span>,</a>
<a class="sourceLine" id="cb6-181" title="181">  <span class="st">&quot;  }&quot;</span>,</a>
<a class="sourceLine" id="cb6-182" title="182">  <span class="st">&quot;}&quot;</span></a>
<a class="sourceLine" id="cb6-183" title="183">)</a>
<a class="sourceLine" id="cb6-184" title="184"></a>
<a class="sourceLine" id="cb6-185" title="185"><span class="co">## shiny app ####</span></a>
<a class="sourceLine" id="cb6-186" title="186">ui &lt;-<span class="st"> </span><span class="kw">fluidPage</span>(</a>
<a class="sourceLine" id="cb6-187" title="187">  <span class="kw">DTOutput</span>(<span class="st">&quot;table&quot;</span>),</a>
<a class="sourceLine" id="cb6-188" title="188">  <span class="kw">br</span>(),</a>
<a class="sourceLine" id="cb6-189" title="189">  <span class="kw">fluidRow</span>(</a>
<a class="sourceLine" id="cb6-190" title="190">    <span class="kw">column</span>(<span class="dv">6</span>, </a>
<a class="sourceLine" id="cb6-191" title="191">           tags<span class="op">$</span><span class="kw">label</span>(<span class="st">&quot;Selected row(s) of main table:&quot;</span>),</a>
<a class="sourceLine" id="cb6-192" title="192">           <span class="kw">verbatimTextOutput</span>(<span class="st">&quot;info-main&quot;</span>)</a>
<a class="sourceLine" id="cb6-193" title="193">    ),</a>
<a class="sourceLine" id="cb6-194" title="194">    <span class="kw">column</span>(<span class="dv">6</span>, </a>
<a class="sourceLine" id="cb6-195" title="195">           tags<span class="op">$</span><span class="kw">label</span>(<span class="st">&quot;Selected row(s) of child tables:&quot;</span>),</a>
<a class="sourceLine" id="cb6-196" title="196">           <span class="kw">verbatimTextOutput</span>(<span class="st">&quot;info-children&quot;</span>)</a>
<a class="sourceLine" id="cb6-197" title="197">    )</a>
<a class="sourceLine" id="cb6-198" title="198">  )</a>
<a class="sourceLine" id="cb6-199" title="199">)</a>
<a class="sourceLine" id="cb6-200" title="200"></a>
<a class="sourceLine" id="cb6-201" title="201">server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output){</a>
<a class="sourceLine" id="cb6-202" title="202">  output[[<span class="st">&quot;table&quot;</span>]] &lt;-<span class="st"> </span><span class="kw">renderDT</span>({</a>
<a class="sourceLine" id="cb6-203" title="203">    <span class="kw">datatable</span>(Dat, <span class="dt">callback =</span> callback, <span class="dt">escape =</span> <span class="dv">-2</span>, </a>
<a class="sourceLine" id="cb6-204" title="204">              <span class="dt">extensions =</span> <span class="st">&quot;Select&quot;</span>, <span class="dt">selection =</span> <span class="st">&quot;none&quot;</span>,</a>
<a class="sourceLine" id="cb6-205" title="205">              <span class="dt">options =</span> <span class="kw">list</span>(</a>
<a class="sourceLine" id="cb6-206" title="206">                <span class="dt">select =</span> <span class="kw">list</span>(<span class="dt">style =</span> <span class="st">&quot;multi&quot;</span>, <span class="dt">selector =</span> <span class="st">&quot;.selectable&quot;</span>),</a>
<a class="sourceLine" id="cb6-207" title="207">                <span class="dt">autoWidth =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb6-208" title="208">                <span class="dt">columnDefs =</span> <span class="kw">list</span>(</a>
<a class="sourceLine" id="cb6-209" title="209">                  <span class="kw">list</span>(<span class="dt">className =</span> <span class="st">&quot;selectable dt-center&quot;</span>, </a>
<a class="sourceLine" id="cb6-210" title="210">                       <span class="dt">targets =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">2</span><span class="op">:</span><span class="kw">ncol</span>(Dat))),</a>
<a class="sourceLine" id="cb6-211" title="211">                  <span class="kw">list</span>(<span class="dt">visible =</span> <span class="ot">FALSE</span>, <span class="dt">targets =</span> <span class="kw">ncol</span>(Dat)),</a>
<a class="sourceLine" id="cb6-212" title="212">                  <span class="kw">list</span>(<span class="dt">orderable =</span> <span class="ot">FALSE</span>, <span class="dt">className =</span> <span class="st">'details-control'</span>, </a>
<a class="sourceLine" id="cb6-213" title="213">                       <span class="dt">width =</span> <span class="st">&quot;10px&quot;</span>, <span class="dt">render =</span> <span class="kw">JS</span>(render), <span class="dt">targets =</span> <span class="dv">1</span>),</a>
<a class="sourceLine" id="cb6-214" title="214">                  <span class="kw">list</span>(<span class="dt">className =</span> <span class="st">&quot;dt-center&quot;</span>, <span class="dt">targets =</span> <span class="st">&quot;_all&quot;</span>)</a>
<a class="sourceLine" id="cb6-215" title="215">                )</a>
<a class="sourceLine" id="cb6-216" title="216">              )</a>
<a class="sourceLine" id="cb6-217" title="217">    )</a>
<a class="sourceLine" id="cb6-218" title="218">  }, <span class="dt">server =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb6-219" title="219">  </a>
<a class="sourceLine" id="cb6-220" title="220">  output[[<span class="st">&quot;info-main&quot;</span>]] &lt;-<span class="st"> </span><span class="kw">renderText</span>({</a>
<a class="sourceLine" id="cb6-221" title="221">    <span class="kw">capture.output</span>(input[[<span class="st">&quot;table_rows_selected&quot;</span>]])</a>
<a class="sourceLine" id="cb6-222" title="222">  })</a>
<a class="sourceLine" id="cb6-223" title="223">  </a>
<a class="sourceLine" id="cb6-224" title="224">  output[[<span class="st">&quot;info-children&quot;</span>]] &lt;-<span class="st"> </span><span class="kw">renderText</span>({</a>
<a class="sourceLine" id="cb6-225" title="225">    <span class="kw">paste0</span>(<span class="kw">capture.output</span>(input[[<span class="st">&quot;table_children&quot;</span>]]), <span class="dt">collapse =</span> <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>)</a>
<a class="sourceLine" id="cb6-226" title="226">  })</a>
<a class="sourceLine" id="cb6-227" title="227">  </a>
<a class="sourceLine" id="cb6-228" title="228">}</a>
<a class="sourceLine" id="cb6-229" title="229"></a>
<a class="sourceLine" id="cb6-230" title="230"><span class="kw">shinyApp</span>(ui, server)</a></code></pre></div>
<p><img src="figures/DTcallback_childTables.png" /></p>
<h1 id="change-row-css-properties-on-clicking-an-icon">Change row CSS properties on clicking an icon</h1>
<p>This callback allows to change the CSS properties of a row by clicking an icon. The indices of the altered rows are sent to the Shiny server.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1"><span class="kw">library</span>(shiny)</a>
<a class="sourceLine" id="cb7-2" title="2"><span class="kw">library</span>(DT)</a>
<a class="sourceLine" id="cb7-3" title="3"></a>
<a class="sourceLine" id="cb7-4" title="4">rowNames &lt;-<span class="st"> </span><span class="ot">TRUE</span> <span class="co"># whether to show row names in the table</span></a>
<a class="sourceLine" id="cb7-5" title="5">colIndex &lt;-<span class="st"> </span><span class="kw">as.integer</span>(rowNames)</a>
<a class="sourceLine" id="cb7-6" title="6"></a>
<a class="sourceLine" id="cb7-7" title="7">callback &lt;-<span class="st"> </span><span class="kw">c</span>(</a>
<a class="sourceLine" id="cb7-8" title="8">  <span class="kw">sprintf</span>(<span class="st">&quot;table.on('click', 'td:nth-child(%d)', function(){&quot;</span>, colIndex<span class="op">+</span><span class="dv">1</span>),</a>
<a class="sourceLine" id="cb7-9" title="9">  <span class="st">&quot;  var td = this;&quot;</span>,</a>
<a class="sourceLine" id="cb7-10" title="10">  <span class="st">&quot;  var cell = table.cell(td);&quot;</span>,</a>
<a class="sourceLine" id="cb7-11" title="11">  <span class="st">&quot;  if(cell.data() === 'ok'){&quot;</span>,</a>
<a class="sourceLine" id="cb7-12" title="12">  <span class="st">&quot;    cell.data('remove');&quot;</span>,</a>
<a class="sourceLine" id="cb7-13" title="13">  <span class="st">&quot;  } else {&quot;</span>,</a>
<a class="sourceLine" id="cb7-14" title="14">  <span class="st">&quot;    cell.data('ok');&quot;</span>,</a>
<a class="sourceLine" id="cb7-15" title="15">  <span class="st">&quot;  }&quot;</span>,</a>
<a class="sourceLine" id="cb7-16" title="16">  <span class="st">&quot;  var $row = $(td).closest('tr');&quot;</span>,</a>
<a class="sourceLine" id="cb7-17" title="17">  <span class="st">&quot;  $row.toggleClass('excluded');&quot;</span>,</a>
<a class="sourceLine" id="cb7-18" title="18">  <span class="st">&quot;  var excludedRows = [];&quot;</span>,</a>
<a class="sourceLine" id="cb7-19" title="19">  <span class="st">&quot;  table.$('tr').each(function(i, row){&quot;</span>,</a>
<a class="sourceLine" id="cb7-20" title="20">  <span class="st">&quot;    if($(this).hasClass('excluded')){&quot;</span>,</a>
<a class="sourceLine" id="cb7-21" title="21">  <span class="st">&quot;      excludedRows.push(parseInt($(row).attr('id').split('_')[1]));&quot;</span>,</a>
<a class="sourceLine" id="cb7-22" title="22">  <span class="st">&quot;    }&quot;</span>,</a>
<a class="sourceLine" id="cb7-23" title="23">  <span class="st">&quot;  });&quot;</span>,</a>
<a class="sourceLine" id="cb7-24" title="24">  <span class="st">&quot;  Shiny.setInputValue('excludedRows', excludedRows);&quot;</span>,</a>
<a class="sourceLine" id="cb7-25" title="25">  <span class="st">&quot;})&quot;</span></a>
<a class="sourceLine" id="cb7-26" title="26">)</a>
<a class="sourceLine" id="cb7-27" title="27"></a>
<a class="sourceLine" id="cb7-28" title="28">restore &lt;-<span class="st"> </span><span class="kw">c</span>(</a>
<a class="sourceLine" id="cb7-29" title="29">  <span class="st">&quot;function(e, table, node, config) {&quot;</span>,</a>
<a class="sourceLine" id="cb7-30" title="30">  <span class="st">&quot;  table.$('tr').removeClass('excluded').each(function(){&quot;</span>,</a>
<a class="sourceLine" id="cb7-31" title="31">  <span class="kw">sprintf</span>(<span class="st">&quot;    var td = $(this).find('td').eq(%d)[0];&quot;</span>, colIndex), </a>
<a class="sourceLine" id="cb7-32" title="32">  <span class="st">&quot;    var cell = table.cell(td);&quot;</span>, </a>
<a class="sourceLine" id="cb7-33" title="33">  <span class="st">&quot;    cell.data('ok');&quot;</span>,</a>
<a class="sourceLine" id="cb7-34" title="34">  <span class="st">&quot;  });&quot;</span>,</a>
<a class="sourceLine" id="cb7-35" title="35">  <span class="st">&quot;  Shiny.setInputValue('excludedRows', null);&quot;</span>,</a>
<a class="sourceLine" id="cb7-36" title="36">  <span class="st">&quot;}&quot;</span></a>
<a class="sourceLine" id="cb7-37" title="37">)</a>
<a class="sourceLine" id="cb7-38" title="38"></a>
<a class="sourceLine" id="cb7-39" title="39">render &lt;-<span class="st"> </span><span class="kw">c</span>(</a>
<a class="sourceLine" id="cb7-40" title="40">  <span class="st">'function(data, type, row, meta){'</span>,</a>
<a class="sourceLine" id="cb7-41" title="41">  <span class="st">'  if(type === &quot;display&quot;){'</span>,</a>
<a class="sourceLine" id="cb7-42" title="42">  <span class="st">'    var color = data === &quot;ok&quot; ? &quot;forestgreen&quot; : &quot;red&quot;;'</span>,</a>
<a class="sourceLine" id="cb7-43" title="43">  <span class="st">'    return &quot;&lt;span style=</span><span class="ch">\\\&quot;</span><span class="st">color:&quot; + color +'</span>,</a>
<a class="sourceLine" id="cb7-44" title="44">  <span class="st">'           &quot;; font-size:18px</span><span class="ch">\\\&quot;</span><span class="st">&gt;&lt;i class=</span><span class="ch">\\\&quot;</span><span class="st">glyphicon glyphicon-&quot; +'</span>, </a>
<a class="sourceLine" id="cb7-45" title="45">  <span class="st">'           data + &quot;</span><span class="ch">\\\&quot;</span><span class="st">&gt;&lt;/i&gt;&lt;/span&gt;&quot;;'</span>,</a>
<a class="sourceLine" id="cb7-46" title="46">  <span class="st">'  } else {'</span>,</a>
<a class="sourceLine" id="cb7-47" title="47">  <span class="st">'    return data;'</span>,</a>
<a class="sourceLine" id="cb7-48" title="48">  <span class="st">'  }'</span>,</a>
<a class="sourceLine" id="cb7-49" title="49">  <span class="st">'}'</span></a>
<a class="sourceLine" id="cb7-50" title="50">)</a>
<a class="sourceLine" id="cb7-51" title="51"></a>
<a class="sourceLine" id="cb7-52" title="52">ui &lt;-<span class="st"> </span><span class="kw">fluidPage</span>(</a>
<a class="sourceLine" id="cb7-53" title="53">  tags<span class="op">$</span><span class="kw">head</span>(</a>
<a class="sourceLine" id="cb7-54" title="54">    tags<span class="op">$</span><span class="kw">style</span>(<span class="kw">HTML</span>(</a>
<a class="sourceLine" id="cb7-55" title="55">      <span class="st">&quot;.excluded { color: rgb(211,211,211); font-style: italic; }&quot;</span></a>
<a class="sourceLine" id="cb7-56" title="56">    ))</a>
<a class="sourceLine" id="cb7-57" title="57">  ),</a>
<a class="sourceLine" id="cb7-58" title="58">  <span class="kw">fluidRow</span>(</a>
<a class="sourceLine" id="cb7-59" title="59">    <span class="kw">column</span>(</a>
<a class="sourceLine" id="cb7-60" title="60">      <span class="dv">6</span>, </a>
<a class="sourceLine" id="cb7-61" title="61">      tags<span class="op">$</span><span class="kw">label</span>(<span class="st">&quot;Excluded rows&quot;</span>),</a>
<a class="sourceLine" id="cb7-62" title="62">      <span class="kw">verbatimTextOutput</span>(<span class="st">&quot;excludedRows&quot;</span>)</a>
<a class="sourceLine" id="cb7-63" title="63">    ),</a>
<a class="sourceLine" id="cb7-64" title="64">    <span class="kw">column</span>(</a>
<a class="sourceLine" id="cb7-65" title="65">      <span class="dv">6</span>, </a>
<a class="sourceLine" id="cb7-66" title="66">      tags<span class="op">$</span><span class="kw">label</span>(<span class="st">&quot;Included rows&quot;</span>),</a>
<a class="sourceLine" id="cb7-67" title="67">      <span class="kw">verbatimTextOutput</span>(<span class="st">&quot;includedRows&quot;</span>)</a>
<a class="sourceLine" id="cb7-68" title="68">    )</a>
<a class="sourceLine" id="cb7-69" title="69">  ),</a>
<a class="sourceLine" id="cb7-70" title="70">  <span class="kw">br</span>(),</a>
<a class="sourceLine" id="cb7-71" title="71">  <span class="kw">DTOutput</span>(<span class="st">&quot;mytable&quot;</span>)</a>
<a class="sourceLine" id="cb7-72" title="72">)</a>
<a class="sourceLine" id="cb7-73" title="73"></a>
<a class="sourceLine" id="cb7-74" title="74">server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output,session) {</a>
<a class="sourceLine" id="cb7-75" title="75">  </a>
<a class="sourceLine" id="cb7-76" title="76">  dat &lt;-<span class="st"> </span><span class="kw">cbind</span>(<span class="dt">Selected =</span> <span class="st">&quot;ok&quot;</span>, mtcars[<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>,], <span class="dt">id =</span> <span class="kw">paste0</span>(<span class="st">&quot;row_&quot;</span>,<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>))</a>
<a class="sourceLine" id="cb7-77" title="77">  </a>
<a class="sourceLine" id="cb7-78" title="78">  output[[<span class="st">&quot;mytable&quot;</span>]] &lt;-<span class="st"> </span><span class="kw">renderDT</span>({</a>
<a class="sourceLine" id="cb7-79" title="79">    <span class="kw">datatable</span>(dat, <span class="dt">rownames =</span> rowNames, </a>
<a class="sourceLine" id="cb7-80" title="80">              <span class="dt">extensions =</span> <span class="kw">c</span>(<span class="st">&quot;Select&quot;</span>, <span class="st">&quot;Buttons&quot;</span>), </a>
<a class="sourceLine" id="cb7-81" title="81">              <span class="dt">selection =</span> <span class="st">&quot;none&quot;</span>, </a>
<a class="sourceLine" id="cb7-82" title="82">              <span class="dt">callback =</span> <span class="kw">JS</span>(callback),</a>
<a class="sourceLine" id="cb7-83" title="83">              <span class="dt">options =</span> <span class="kw">list</span>(</a>
<a class="sourceLine" id="cb7-84" title="84">                <span class="dt">rowId =</span> <span class="kw">JS</span>(<span class="kw">sprintf</span>(<span class="st">&quot;function(data){return data[%d];}&quot;</span>, </a>
<a class="sourceLine" id="cb7-85" title="85">                                   <span class="kw">ncol</span>(dat)<span class="op">-</span><span class="dv">1</span><span class="op">+</span>colIndex)), </a>
<a class="sourceLine" id="cb7-86" title="86">                <span class="dt">columnDefs =</span> <span class="kw">list</span>(</a>
<a class="sourceLine" id="cb7-87" title="87">                  <span class="kw">list</span>(<span class="dt">visible =</span> <span class="ot">FALSE</span>, <span class="dt">targets =</span> <span class="kw">ncol</span>(dat)<span class="op">-</span><span class="dv">1</span><span class="op">+</span>colIndex),</a>
<a class="sourceLine" id="cb7-88" title="88">                  <span class="kw">list</span>(<span class="dt">className =</span> <span class="st">&quot;dt-center&quot;</span>, <span class="dt">targets =</span> <span class="st">&quot;_all&quot;</span>),</a>
<a class="sourceLine" id="cb7-89" title="89">                  <span class="kw">list</span>(<span class="dt">className =</span> <span class="st">&quot;notselectable&quot;</span>, <span class="dt">targets =</span> colIndex),</a>
<a class="sourceLine" id="cb7-90" title="90">                  <span class="kw">list</span>(<span class="dt">targets =</span> colIndex, <span class="dt">render =</span> <span class="kw">JS</span>(render)) </a>
<a class="sourceLine" id="cb7-91" title="91">                ),</a>
<a class="sourceLine" id="cb7-92" title="92">                <span class="dt">dom =</span> <span class="st">&quot;Bt&quot;</span>,</a>
<a class="sourceLine" id="cb7-93" title="93">                <span class="dt">buttons =</span> <span class="kw">list</span>(<span class="st">&quot;copy&quot;</span>, <span class="st">&quot;csv&quot;</span>,</a>
<a class="sourceLine" id="cb7-94" title="94">                               <span class="kw">list</span>(</a>
<a class="sourceLine" id="cb7-95" title="95">                                 <span class="dt">extend =</span> <span class="st">&quot;collection&quot;</span>,</a>
<a class="sourceLine" id="cb7-96" title="96">                                 <span class="dt">text =</span> <span class="st">'Select all rows'</span>, </a>
<a class="sourceLine" id="cb7-97" title="97">                                 <span class="dt">action =</span> <span class="kw">JS</span>(restore)</a>
<a class="sourceLine" id="cb7-98" title="98">                               )</a>
<a class="sourceLine" id="cb7-99" title="99">                ),</a>
<a class="sourceLine" id="cb7-100" title="100">                <span class="dt">select =</span> <span class="kw">list</span>(<span class="dt">style =</span> <span class="st">&quot;single&quot;</span>, </a>
<a class="sourceLine" id="cb7-101" title="101">                              <span class="dt">selector =</span> <span class="st">&quot;td:not(.notselectable)&quot;</span>)</a>
<a class="sourceLine" id="cb7-102" title="102">              )</a>
<a class="sourceLine" id="cb7-103" title="103">    )</a>
<a class="sourceLine" id="cb7-104" title="104">  }, <span class="dt">server =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb7-105" title="105">    </a>
<a class="sourceLine" id="cb7-106" title="106">    output<span class="op">$</span>excludedRows &lt;-<span class="st"> </span><span class="kw">renderPrint</span>({</a>
<a class="sourceLine" id="cb7-107" title="107">      input[[<span class="st">&quot;excludedRows&quot;</span>]]</a>
<a class="sourceLine" id="cb7-108" title="108">    })</a>
<a class="sourceLine" id="cb7-109" title="109"></a>
<a class="sourceLine" id="cb7-110" title="110">    output<span class="op">$</span>includedRows &lt;-<span class="st"> </span><span class="kw">renderPrint</span>({</a>
<a class="sourceLine" id="cb7-111" title="111">      <span class="kw">setdiff</span>(<span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(dat), input[[<span class="st">&quot;excludedRows&quot;</span>]])</a>
<a class="sourceLine" id="cb7-112" title="112">    })</a>
<a class="sourceLine" id="cb7-113" title="113">    </a>
<a class="sourceLine" id="cb7-114" title="114">}</a>
<a class="sourceLine" id="cb7-115" title="115"></a>
<a class="sourceLine" id="cb7-116" title="116"><span class="kw">shinyApp</span>(ui, server)</a></code></pre></div>
<p><img src="figures/DTcallback_rowCSSonclick.png" /></p>
<h1 id="capturing-the-autofilled-cells">Capturing the autofilled cells</h1>
<p>The <code>AutoFill</code> extension gives an Excel like option to a DataTable to click and drag over multiple cells, filling in information over the selected cells and incrementing numbers as needed.</p>
<p>The callback below allows to update the data in the R server when some cells are edited or changed by autofilling.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1"><span class="kw">library</span>(shiny)</a>
<a class="sourceLine" id="cb8-2" title="2"><span class="kw">library</span>(DT)</a>
<a class="sourceLine" id="cb8-3" title="3"></a>
<a class="sourceLine" id="cb8-4" title="4">callback &lt;-<span class="st"> </span><span class="kw">c</span>(</a>
<a class="sourceLine" id="cb8-5" title="5">  <span class="st">&quot;var tbl = $(table.table().node());&quot;</span>,</a>
<a class="sourceLine" id="cb8-6" title="6">  <span class="st">&quot;var id = tbl.closest('.datatables').attr('id');&quot;</span>,</a>
<a class="sourceLine" id="cb8-7" title="7">  <span class="st">&quot;table.on('autoFill', function(e, datatable, cells){&quot;</span>,</a>
<a class="sourceLine" id="cb8-8" title="8">  <span class="st">&quot;  var out = [];&quot;</span>,</a>
<a class="sourceLine" id="cb8-9" title="9">  <span class="st">&quot;  for(var i = 0; i &lt; cells.length; ++i){&quot;</span>,</a>
<a class="sourceLine" id="cb8-10" title="10">  <span class="st">&quot;    var cells_i = cells[i];&quot;</span>,</a>
<a class="sourceLine" id="cb8-11" title="11">  <span class="st">&quot;    for(var j = 0; j &lt; cells_i.length; ++j){&quot;</span>,</a>
<a class="sourceLine" id="cb8-12" title="12">  <span class="st">&quot;      var c = cells_i[j];&quot;</span>,</a>
<a class="sourceLine" id="cb8-13" title="13">  <span class="st">&quot;      var value = c.set === null ? '' : c.set;&quot;</span>, <span class="co"># null =&gt; problem in R</span></a>
<a class="sourceLine" id="cb8-14" title="14">  <span class="st">&quot;      out.push({&quot;</span>,</a>
<a class="sourceLine" id="cb8-15" title="15">  <span class="st">&quot;        row: c.index.row + 1,&quot;</span>,</a>
<a class="sourceLine" id="cb8-16" title="16">  <span class="st">&quot;        col: c.index.column,&quot;</span>,</a>
<a class="sourceLine" id="cb8-17" title="17">  <span class="st">&quot;        value: value&quot;</span>,</a>
<a class="sourceLine" id="cb8-18" title="18">  <span class="st">&quot;      });&quot;</span>,</a>
<a class="sourceLine" id="cb8-19" title="19"><span class="co"># to color the autofilled cells, uncomment the two lines below  </span></a>
<a class="sourceLine" id="cb8-20" title="20"><span class="co">#  &quot;      $(table.cell(c.index.row, c.index.column).node())&quot;,</span></a>
<a class="sourceLine" id="cb8-21" title="21"><span class="co">#  &quot;        .css('background-color', 'yellow');&quot;,</span></a>
<a class="sourceLine" id="cb8-22" title="22">  <span class="st">&quot;    }&quot;</span>,</a>
<a class="sourceLine" id="cb8-23" title="23">  <span class="st">&quot;  }&quot;</span>,</a>
<a class="sourceLine" id="cb8-24" title="24">  <span class="st">&quot;  Shiny.setInputValue(id + '_cells_filled:DT.cellInfo', out);&quot;</span>,</a>
<a class="sourceLine" id="cb8-25" title="25">  <span class="st">&quot;  table.rows().invalidate();&quot;</span>, <span class="co"># this updates the column type</span></a>
<a class="sourceLine" id="cb8-26" title="26">  <span class="st">&quot;});&quot;</span></a>
<a class="sourceLine" id="cb8-27" title="27">)</a>
<a class="sourceLine" id="cb8-28" title="28"></a>
<a class="sourceLine" id="cb8-29" title="29">ui &lt;-<span class="st"> </span><span class="kw">fluidPage</span>(</a>
<a class="sourceLine" id="cb8-30" title="30">  <span class="kw">br</span>(),</a>
<a class="sourceLine" id="cb8-31" title="31">  <span class="kw">DTOutput</span>(<span class="st">&quot;dt&quot;</span>),</a>
<a class="sourceLine" id="cb8-32" title="32">  <span class="kw">br</span>(),</a>
<a class="sourceLine" id="cb8-33" title="33">  <span class="kw">verbatimTextOutput</span>(<span class="st">&quot;table&quot;</span>)</a>
<a class="sourceLine" id="cb8-34" title="34">)</a>
<a class="sourceLine" id="cb8-35" title="35"></a>
<a class="sourceLine" id="cb8-36" title="36">server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output){</a>
<a class="sourceLine" id="cb8-37" title="37">  </a>
<a class="sourceLine" id="cb8-38" title="38">  dat &lt;-<span class="st"> </span>iris[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>,]</a>
<a class="sourceLine" id="cb8-39" title="39">  dat<span class="op">$</span>Species &lt;-<span class="st"> </span><span class="kw">as.character</span>(dat<span class="op">$</span>Species)</a>
<a class="sourceLine" id="cb8-40" title="40">  </a>
<a class="sourceLine" id="cb8-41" title="41">  output[[<span class="st">&quot;dt&quot;</span>]] &lt;-<span class="st"> </span><span class="kw">renderDT</span>({</a>
<a class="sourceLine" id="cb8-42" title="42">    <span class="kw">datatable</span>(dat, </a>
<a class="sourceLine" id="cb8-43" title="43">              <span class="dt">editable =</span> <span class="kw">list</span>(<span class="dt">target =</span> <span class="st">&quot;cell&quot;</span>),</a>
<a class="sourceLine" id="cb8-44" title="44">              <span class="dt">selection =</span> <span class="st">&quot;none&quot;</span>,</a>
<a class="sourceLine" id="cb8-45" title="45">              <span class="dt">extensions =</span> <span class="st">&quot;AutoFill&quot;</span>,</a>
<a class="sourceLine" id="cb8-46" title="46">              <span class="dt">callback =</span> <span class="kw">JS</span>(callback), </a>
<a class="sourceLine" id="cb8-47" title="47">              <span class="dt">options =</span> <span class="kw">list</span>(</a>
<a class="sourceLine" id="cb8-48" title="48">                <span class="dt">autoFill =</span> <span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb8-49" title="49">              )</a>
<a class="sourceLine" id="cb8-50" title="50">    )</a>
<a class="sourceLine" id="cb8-51" title="51">  }, <span class="dt">server =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb8-52" title="52">  </a>
<a class="sourceLine" id="cb8-53" title="53">  Data &lt;-<span class="st"> </span><span class="kw">reactive</span>({</a>
<a class="sourceLine" id="cb8-54" title="54">    info &lt;-<span class="st"> </span><span class="kw">rbind</span>(input[[<span class="st">&quot;dt_cells_filled&quot;</span>]], input[[<span class="st">&quot;dt_cell_edit&quot;</span>]])</a>
<a class="sourceLine" id="cb8-55" title="55">    <span class="cf">if</span>(<span class="op">!</span><span class="kw">is.null</span>(info)){</a>
<a class="sourceLine" id="cb8-56" title="56">      info &lt;-<span class="st"> </span><span class="kw">unique</span>(info)</a>
<a class="sourceLine" id="cb8-57" title="57">      info<span class="op">$</span>value[info<span class="op">$</span>value<span class="op">==</span><span class="st">&quot;&quot;</span>] &lt;-<span class="st"> </span><span class="ot">NA</span></a>
<a class="sourceLine" id="cb8-58" title="58">      dat &lt;&lt;-<span class="st"> </span><span class="kw">editData</span>(dat, info, <span class="dt">proxy =</span> <span class="st">&quot;dt&quot;</span>)</a>
<a class="sourceLine" id="cb8-59" title="59">    }</a>
<a class="sourceLine" id="cb8-60" title="60">    dat</a>
<a class="sourceLine" id="cb8-61" title="61">  })</a>
<a class="sourceLine" id="cb8-62" title="62"></a>
<a class="sourceLine" id="cb8-63" title="63">  output[[<span class="st">&quot;table&quot;</span>]] &lt;-<span class="st"> </span><span class="kw">renderPrint</span>({<span class="kw">Data</span>()})  </a>
<a class="sourceLine" id="cb8-64" title="64">}</a>
<a class="sourceLine" id="cb8-65" title="65"></a>
<a class="sourceLine" id="cb8-66" title="66"><span class="kw">shinyApp</span>(ui, server)</a></code></pre></div>
<p><img src="figures/DTcallback_AutoFill.gif" /></p>
<p>If you use <code>server = FALSE</code> in <code>renderDT</code>, just remove the <code>proxy</code> argument in <code>editData</code>:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1">dat &lt;&lt;-<span class="st"> </span><span class="kw">editData</span>(dat, info)</a></code></pre></div>
<h1 id="select-page-with-a-numeric-input">Select page with a numeric input</h1>
<p>The default pagination is not convenient when there are many pages (the user has to click multiple times on the ‘Next’ or ‘Previous’ button). This callback allows to select a page with a numeric input.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1"><span class="kw">library</span>(shiny)</a>
<a class="sourceLine" id="cb10-2" title="2"><span class="kw">library</span>(DT)</a>
<a class="sourceLine" id="cb10-3" title="3"></a>
<a class="sourceLine" id="cb10-4" title="4"><span class="kw">shinyApp</span>(</a>
<a class="sourceLine" id="cb10-5" title="5">  <span class="dt">ui =</span> <span class="kw">fluidPage</span>(</a>
<a class="sourceLine" id="cb10-6" title="6">    tags<span class="op">$</span><span class="kw">head</span>(tags<span class="op">$</span><span class="kw">style</span>(<span class="st">&quot;.pagination {float: right;}&quot;</span>)),</a>
<a class="sourceLine" id="cb10-7" title="7">    <span class="kw">fluidRow</span>(</a>
<a class="sourceLine" id="cb10-8" title="8">      <span class="kw">div</span>(<span class="dt">id=</span><span class="st">&quot;pagination&quot;</span>, </a>
<a class="sourceLine" id="cb10-9" title="9">          <span class="kw">div</span>(<span class="dt">style =</span> <span class="st">&quot;display:inline-block;&quot;</span>, </a>
<a class="sourceLine" id="cb10-10" title="10">              tags<span class="op">$</span><span class="kw">a</span>(<span class="dt">id =</span> <span class="st">&quot;first&quot;</span>, <span class="dt">style =</span> <span class="st">&quot;cursor: pointer;&quot;</span>, <span class="st">&quot;First&quot;</span>)),</a>
<a class="sourceLine" id="cb10-11" title="11">          <span class="kw">div</span>(<span class="dt">style =</span> <span class="st">&quot;display:inline-block;&quot;</span>, </a>
<a class="sourceLine" id="cb10-12" title="12">              tags<span class="op">$</span><span class="kw">a</span>(<span class="dt">id =</span> <span class="st">&quot;previous&quot;</span>, <span class="dt">style =</span> <span class="st">&quot;cursor: pointer;&quot;</span>, <span class="st">&quot; Previous&quot;</span>)),</a>
<a class="sourceLine" id="cb10-13" title="13">          <span class="kw">div</span>(<span class="dt">style =</span> <span class="st">&quot;display:inline-block;&quot;</span>, </a>
<a class="sourceLine" id="cb10-14" title="14">              tags<span class="op">$</span><span class="kw">input</span>(<span class="dt">id=</span><span class="st">&quot;page&quot;</span>, <span class="dt">type=</span><span class="st">&quot;number&quot;</span>, <span class="dt">class=</span><span class="st">&quot;input-sm&quot;</span>, <span class="dt">value=</span><span class="st">&quot;1&quot;</span>, <span class="dt">min=</span><span class="st">&quot;1&quot;</span>)</a>
<a class="sourceLine" id="cb10-15" title="15">          ),</a>
<a class="sourceLine" id="cb10-16" title="16">          <span class="kw">div</span>(<span class="dt">style =</span> <span class="st">&quot;display:inline-block;&quot;</span>, </a>
<a class="sourceLine" id="cb10-17" title="17">              tags<span class="op">$</span><span class="kw">span</span>(<span class="dt">id =</span> <span class="st">&quot;of&quot;</span>)),</a>
<a class="sourceLine" id="cb10-18" title="18">          <span class="kw">div</span>(<span class="dt">style =</span> <span class="st">&quot;display:inline-block;&quot;</span>, </a>
<a class="sourceLine" id="cb10-19" title="19">              tags<span class="op">$</span><span class="kw">a</span>(<span class="dt">id =</span> <span class="st">&quot;next&quot;</span>, <span class="dt">style =</span> <span class="st">&quot;cursor: pointer;&quot;</span>, <span class="st">&quot;Next &quot;</span>)),</a>
<a class="sourceLine" id="cb10-20" title="20">          <span class="kw">div</span>(<span class="dt">style =</span> <span class="st">&quot;display:inline-block;&quot;</span>, </a>
<a class="sourceLine" id="cb10-21" title="21">              tags<span class="op">$</span><span class="kw">a</span>(<span class="dt">id =</span> <span class="st">&quot;last&quot;</span>, <span class="dt">style =</span> <span class="st">&quot;cursor: pointer;&quot;</span>, <span class="st">&quot;Last&quot;</span>))</a>
<a class="sourceLine" id="cb10-22" title="22">      )</a>
<a class="sourceLine" id="cb10-23" title="23">    ),</a>
<a class="sourceLine" id="cb10-24" title="24">    <span class="kw">fluidRow</span>(</a>
<a class="sourceLine" id="cb10-25" title="25">      <span class="kw">column</span>(<span class="dv">12</span>, <span class="kw">DTOutput</span>(<span class="st">'tbl'</span>))</a>
<a class="sourceLine" id="cb10-26" title="26">    )</a>
<a class="sourceLine" id="cb10-27" title="27">  ),</a>
<a class="sourceLine" id="cb10-28" title="28">  <span class="dt">server =</span> <span class="cf">function</span>(input, output) {</a>
<a class="sourceLine" id="cb10-29" title="29">    output<span class="op">$</span>tbl =<span class="st"> </span><span class="kw">renderDT</span>({</a>
<a class="sourceLine" id="cb10-30" title="30">      <span class="kw">datatable</span>(</a>
<a class="sourceLine" id="cb10-31" title="31">        iris, <span class="dt">options =</span> <span class="kw">list</span>(</a>
<a class="sourceLine" id="cb10-32" title="32">          <span class="dt">dom =</span> <span class="st">&quot;lfrti&lt;'pagination'&gt;&quot;</span>, </a>
<a class="sourceLine" id="cb10-33" title="33">          <span class="dt">initComplete =</span> <span class="kw">JS</span>(<span class="kw">c</span>(</a>
<a class="sourceLine" id="cb10-34" title="34">            <span class="st">&quot;function(settings, json){&quot;</span>,</a>
<a class="sourceLine" id="cb10-35" title="35">            <span class="st">&quot;  var table = settings.oInstance.api();&quot;</span>,</a>
<a class="sourceLine" id="cb10-36" title="36">            <span class="st">&quot;  var pageinfo = table.page.info();&quot;</span>,</a>
<a class="sourceLine" id="cb10-37" title="37">            <span class="st">&quot;  $('#of').text('of ' + pageinfo.pages);&quot;</span>,</a>
<a class="sourceLine" id="cb10-38" title="38">            <span class="st">&quot;}&quot;</span></a>
<a class="sourceLine" id="cb10-39" title="39">          ))</a>
<a class="sourceLine" id="cb10-40" title="40">        ),</a>
<a class="sourceLine" id="cb10-41" title="41">        <span class="dt">callback =</span> <span class="kw">JS</span>(<span class="kw">c</span>(</a>
<a class="sourceLine" id="cb10-42" title="42">          <span class="st">&quot;$('div.pagination').append($('#pagination'));&quot;</span>,</a>
<a class="sourceLine" id="cb10-43" title="43">          <span class="st">&quot;$('#first').on('click', function(){&quot;</span>, </a>
<a class="sourceLine" id="cb10-44" title="44">          <span class="st">&quot;  table.page('first').draw('page');&quot;</span>,</a>
<a class="sourceLine" id="cb10-45" title="45">          <span class="st">&quot;  $('#page').val(1);&quot;</span>,</a>
<a class="sourceLine" id="cb10-46" title="46">          <span class="st">&quot;});&quot;</span>,</a>
<a class="sourceLine" id="cb10-47" title="47">          <span class="st">&quot;$('#previous').on('click', function(){&quot;</span>, </a>
<a class="sourceLine" id="cb10-48" title="48">          <span class="st">&quot;  table.page('previous').draw('page');&quot;</span>,</a>
<a class="sourceLine" id="cb10-49" title="49">          <span class="st">&quot;  $('#page').val(table.page.info().page + 1);&quot;</span>,</a>
<a class="sourceLine" id="cb10-50" title="50">          <span class="st">&quot;});&quot;</span>,</a>
<a class="sourceLine" id="cb10-51" title="51">          <span class="st">&quot;$('#next').on('click', function(){&quot;</span>, </a>
<a class="sourceLine" id="cb10-52" title="52">          <span class="st">&quot;  table.page('next').draw('page');&quot;</span>,</a>
<a class="sourceLine" id="cb10-53" title="53">          <span class="st">&quot;  $('#page').val(table.page.info().page + 1);&quot;</span>,</a>
<a class="sourceLine" id="cb10-54" title="54">          <span class="st">&quot;});&quot;</span>,</a>
<a class="sourceLine" id="cb10-55" title="55">          <span class="st">&quot;$('#last').on('click', function(){&quot;</span>, </a>
<a class="sourceLine" id="cb10-56" title="56">          <span class="st">&quot;  table.page('last').draw('page');&quot;</span>,</a>
<a class="sourceLine" id="cb10-57" title="57">          <span class="st">&quot;  $('#page').val(table.page.info().pages);&quot;</span>,</a>
<a class="sourceLine" id="cb10-58" title="58">          <span class="st">&quot;});&quot;</span>,</a>
<a class="sourceLine" id="cb10-59" title="59">          <span class="st">&quot;$('#page').on('change', function(){&quot;</span>,</a>
<a class="sourceLine" id="cb10-60" title="60">          <span class="st">&quot;  var page = parseInt($('#page').val());&quot;</span>,</a>
<a class="sourceLine" id="cb10-61" title="61">          <span class="st">&quot;  if(!isNaN(page)){ table.page(page-1).draw('page'); }&quot;</span>,</a>
<a class="sourceLine" id="cb10-62" title="62">          <span class="st">&quot;});&quot;</span></a>
<a class="sourceLine" id="cb10-63" title="63">        ))</a>
<a class="sourceLine" id="cb10-64" title="64">      )</a>
<a class="sourceLine" id="cb10-65" title="65">    })</a>
<a class="sourceLine" id="cb10-66" title="66">  }</a>
<a class="sourceLine" id="cb10-67" title="67">)</a></code></pre></div>
<p><img src="figures/DTcallback_pagination.gif" /></p>

        </div>


        <div id="footer">
          Site proudly generated by
          <a href="http://jaspervdj.be/hakyll">Hakyll</a>
        </div>

      </div>

    </div>

  </div>

  <div id="disqus_thread"></div>
  <div class="pagination">
    <ul>
      <li>
        <a href="http://laustep.github.io/stlahblog/">« Back Home</a>
      </li>
    </ul>
  </div>
</body>
<script src="../libraries/bootstrap/bootstrap.min.js"></script>
<script>
  var disqus_developer = 1;
  var disqus_shortname = 'stlapblog';
  // required: replace example with your forum shortname
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function () {
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] ||
      document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the
  <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a>
</noscript>
<!-- MathJax: Fall back to local if CDN offline but local image fonts are not supported (saves >100MB) -->
<script type="text/x-mathjax-config" src="../libraries/mathjax/config/TeX-MML-AM_CHTML.js"></script>
<!-- <script>
  window.MathJax || document.write('<script type="text/x-mathjax-config">MathJax.Hub.Config({"HTML-CSS":{imageFont:null}});<\/script><script src="../libraries/mathjax/MathJax.js"><\/script>');
</script> -->

  <!-- Google Prettify -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prettify/188.0.0/prettify.js"></script>
  <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.js"></script> -->
  <script src="../libraries/highlighters/prettify/js/lang-r.js"></script>
  <script>
    var pres = document.getElementsByTagName("pre");
    for (var i = 0; i < pres.length; ++i) {
      
        pres[i].className = pres[i].className + " prettyprint linenums";
      
    }
    prettyPrint();
  </script> 


</html>